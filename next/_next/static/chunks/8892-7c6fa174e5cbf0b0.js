(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8892],{68230:function(e,t,r){"use strict";r.d(t,{B:function(){return c}});var n=r(22027),o=r.n(n),i=r(27843),a=r.n(i);function s(e,t=[],r=new Map){for(const n of Object.keys(e)){const o=e[n],i=[...t,n];"object"===typeof o?s(o,i,r):r.set(i,o)}return r}function l(e){const t=s(e),r=e=>{for(const r of t){const[t,n]=r;if(a()(e,t)!==n)return!1}return!0};return r.count=t.size,r}const u=()=>new(o())([],(e=>e.matcher.count));class c{constructor(e){this.store=u(),null==e||e.forEach((([e,t])=>{this.set(e,t)}))}set(e,t){const r="object"===typeof e?l(e):function(e){const t=t=>e===t;return t.count=1,t}(e);this.store.insert({key:e,value:t,matcher:r})}get(e){for(const t of this.store.array)if(t.matcher(e))return t.value}forEach(e){for(const t of this.store.array)e(t)}clear(){this.store=u()}}},49408:function(e,t,r){"use strict";function n(e,t,r){return e.context?e.callback(r,...t):e.callback(...t)}r.d(t,{N5:function(){return bo},nI:function(){return Xo},qr:function(){return wo},nm:function(){return So}});class o{constructor(){this.interceptions=[],this.interceptionKeySet=new Set}isUsed(){return this.interceptions.length>0}intercept(e){this.interceptions.push(e),Object.keys(e).forEach((e=>{this.interceptionKeySet.add(e)}))}tap(e){this.interceptionKeySet.has("tap")&&this.interceptions.forEach((t=>{var r;null==(r=t.tap)||r.call(t,e)}))}call(e,...t){this.interceptionKeySet.has("call")&&this.interceptions.forEach((r=>{var n,o;r.context?null==(n=r.call)||n.call(r,e,...t):null==(o=r.call)||o.call(r,...t)}))}loop(...e){this.interceptionKeySet.has("loop")&&this.interceptions.forEach((t=>{var r;null==(r=t.loop)||r.call(t,...e)}))}error(e){if(this.interceptionKeySet.has("error")&&e instanceof Error){const t=e;this.interceptions.forEach((e=>{var r;null==(r=e.error)||r.call(e,t)}))}}result(e){this.interceptionKeySet.has("result")&&this.interceptions.forEach((t=>{var r;null==(r=t.result)||r.call(t,e)}))}done(){this.interceptionKeySet.has("done")&&this.interceptions.forEach((e=>{var t;null==(t=e.done)||t.call(e)}))}}class i{constructor(){this.taps=[],this.interceptions=new o}tap(e,t){const r="string"===typeof e?{name:e,context:!1}:{context:!1,...e},n={key:Symbol(r.name),...r,callback:t};if(n.before){let e=this.taps.length;const t=new Set(Array.isArray(n.before)?n.before:[n.before]);for(;e>0&&t.size>0;e--){const r=this.taps[e-1];if(t.has(r.name)&&t.delete(r.name),r.before&&(o=n.name,i=r.before,Array.isArray(i)?i.includes(o):i===o))break}this.taps.splice(e,0,n)}else this.taps.push(n);var o,i;return this.interceptions.tap(n),n}untap(e){this.taps=this.taps.filter((t=>t.key!==e.key))}isUsed(){return this.taps.length>0||this.interceptions.isUsed()}intercept(e){this.interceptions.intercept(e)}}class a extends i{call(...e){if(!this.isUsed())return;const t={};this.interceptions.call(t,...e);try{this.taps.forEach((r=>{n(r,e,t)}))}catch(r){throw this.interceptions.error(r),r}this.interceptions.done()}}class s extends i{call(...e){if(!this.isUsed())return;const t={};this.interceptions.call(t,...e);for(let r=0;r<this.taps.length;r+=1){const o=n(this.taps[r],e,t);if(void 0!==o)return this.interceptions.result(o),o}this.interceptions.done()}}class l extends i{call(...e){const t={};this.interceptions.call(t,...e);let[r,...o]=e;for(let i=0;i<this.taps.length;i+=1){const e=n(this.taps[i],[r,...o],t);void 0!==e&&(r=e)}return this.interceptions.result(r),r}}class u extends i{async call(...e){const t={};this.interceptions.call(t,...e),await Promise.allSettled(this.taps.map((r=>n(r,e,t)))),this.interceptions.done()}}class c extends i{async call(...e){let[t,...r]=e;const o={};this.interceptions.call(o,...e);try{for(let e=0;e<this.taps.length;e+=1){const i=await n(this.taps[e],[t,...r],o);void 0!==i&&(t=i)}}catch(i){throw this.interceptions.error(i),i}return this.interceptions.result(t),t}}var p=r(25977),f=r.n(p),h=r(99488),d=r.n(h),y=r(78094),g=r.n(y),v=r(75944),m=r(27843),b=r.n(m),w=r(10643),E=Object.prototype.hasOwnProperty;function S(e,t,r){for(r of e.keys())if(O(r,t))return r}function O(e,t){var r,n,o;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&O(e[n],t[n]););return-1===n}if(r===Set){if(e.size!==t.size)return!1;for(n of e){if((o=n)&&"object"===typeof o&&!(o=S(t,o)))return!1;if(!t.has(o))return!1}return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e){if((o=n[0])&&"object"===typeof o&&!(o=S(t,o)))return!1;if(!O(n[1],t.get(o)))return!1}return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return-1===n}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return-1===n}if(!r||"object"===typeof e){for(r in n=0,e){if(E.call(e,r)&&++n&&!E.call(t,r))return!1;if(!(r in t)||!O(e[r],t[r]))return!1}return Object.keys(t).length===n}}return e!==e&&t!==t}var P=r(22876),x=r.n(P),A=r(65089),R=r.n(A),k=r(68230);const j=e=>({name:"Value",value:e}),_=e=>({name:"Expression",value:e}),C=e=>({name:"PathNode",path:e}),T=(e,t)=>({name:"Query",key:e,value:t}),U=e=>1===e.length?e[0]:{name:"Concatenated",value:e},B=g().string('"'),I=g().string("'"),N=g().string("`"),D=g().regex(/[\w\-@]+/).desc("identifier").map(j);let L;const M=g().lazy((()=>L)).trim(g().optWhitespace).wrap(g().string("{{"),g().string("}}")).map(C),V=g().regex(/[^`]*/).wrap(N,N).map(_),F=g().alt(D,M,V).atLeast(1).map(d()).map(U),$=g().alt(g().regex(/[^"]*/).wrap(B,B).map(j),g().regex(/[^']*/).wrap(I,I).map(j),F),z=g().seq($,g().string("=").times(1,3).trim(g().optWhitespace),$).map((([e,,t])=>T(e,t))),W=g().alt(z,$).trim(g().optWhitespace).wrap(g().string("["),g().string("]")).many(),H=g().seqMap(F,W,((e,t)=>[e,...t]));L=g().sepBy(H,g().string(".")).map(d()),new v.Grammars.W3C.Parser('\nvalue                      ::= segment_and_bracket (SEGMENT_SEPARATOR segment_and_bracket)*\nsegment                    ::= concatenated | expression | modelRef | identifier  \nconcatenated               ::= (expression | modelRef | identifier)+ \nmodelRef                   ::= OPEN_CURL OPEN_CURL value CLOSE_CURL CLOSE_CURL \nidentifier                 ::= [\\w\\-@]+\nquery                      ::= WHITESPACE* optionally_quoted_segment WHITESPACE* EQUALS EQUALS? EQUALS? WHITESPACE* optionally_quoted_segment WHITESPACE*\nbrackets                   ::= OPEN_BRACKET WHITESPACE* (query | optionally_quoted_segment) WHITESPACE* CLOSE_BRACKET \nsegment_and_bracket        ::= segment brackets*\nquoted_value               ::= [^"\']*\noptionally_quoted_segment  ::= WHITESPACE* SINGLE_QUOTE quoted_value SINGLE_QUOTE WHITESPACE* | WHITESPACE* DOUBLE_QUOTE quoted_value DOUBLE_QUOTE WHITESPACE* | WHITESPACE* segment WHITESPACE*\nexpression_value           ::= [^`]*\nexpression                 ::= BACK_TICK expression_value BACK_TICK\n\nEQUALS                     ::= "="\nSEGMENT_SEPARATOR          ::= "."\nSINGLE_QUOTE               ::= "\'"\nDOUBLE_QUOTE               ::= \'"\'\nWHITESPACE                 ::= " "\nOPEN_CURL                  ::= "{"\nCLOSE_CURL                 ::= "}" \nOPEN_BRACKET               ::= "[" \nCLOSE_BRACKET              ::= "]"\nBACK_TICK                  ::= "`" \n');const q="{",Y="'",G="`",K=e=>{if(!e)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||95===t||45===t||64===t},J=e=>{let t=1,r=e.charAt(0);const n=n=>{if(n&&r!==n)throw new Error(`Expected char: ${n} but got: ${r}`);return r=e.charAt(t),t+=1,r},o=()=>{for(;" "===r;)n()},i=()=>{var e,t;return null!=(t=null!=(e=(()=>{if(r===q&&(n(q),r===q)){n(q);const e=u();return n("}"),n("}"),e}})())?e:(()=>{if(r===G){n(G);let e=r;for(;n()&&r!==G;)e+=r;if(n(G),e)return _(e)}})())?t:(()=>{if(!K(r))return;let e=r;for(;n()&&K(r);)e+=r;return e?j(e):void 0})()},a=()=>{if(o(),r===Y||'"'===r){const e=r===Y;n(e?Y:'"');const t=(e=>{if(!(null==r?void 0:r.match(e)))return;let t=r;for(;n()&&(null==r?void 0:r.match(e));)t+=r;return t?j(t):void 0})(/[^'"]+/);return n(e?Y:'"'),t}return i()},s=()=>{if("["===r){n("["),o();let e=a();if(!e)throw new Error("Expected identifier");if(o(),(()=>{if("="!==r)return!1;for(;"="===r;)n();return!0})()){o();const t=a();e=T(e,t),o()}return e&&n("]"),e}},l=()=>{const e=[],t=(()=>{const e=[];let t=i();for(;void 0!==t;)e.push(t),t=i();if(0!==e.length)return U(e)})();if(t){e.push(t);let r=s();for(;void 0!==r;)e.push(r),r=s()}return e},u=()=>{const e=[];let t=l();for(;void 0!==t&&(e.push(...t),r&&"}"!==r);){if(0===t.length&&r)throw new Error(`Unexpected character: ${r}`);n("."),t=l()}return C(e)};try{return{status:!0,path:u()}}catch(c){return{status:!1,error:c.message}}};function Z(e){return!("string"===typeof e||Array.isArray(e))}class Q{constructor(e,t=(e=>new Q(e))){const r=Array.isArray(e)?e:e.split(".");this.split=r.map((e=>{if("number"===typeof e)return e;const t=Number(e);return isNaN(t)?e:t})),Object.freeze(this.split),this.joined=this.split.join("."),this.factory=t}asArray(){return this.split}asString(){return this.joined}contains(e){const t=e.asArray();if(t.length<this.split.length)return!1;for(let r=0;r<this.split.length;r++)if(this.split[r]!==t[r])return!1;return!0}relative(e){return this.asArray().slice(e.asArray().length)}parent(){return this.factory(this.split.slice(0,-1))}key(){return this.split[this.split.length-1]}descendent(e){const t=(r=e,Array.isArray(r)?r:"string"===typeof r?r.split("."):r.asArray());var r;return this.factory(this.split.concat(t))}}var X=Object.defineProperty,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ne=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oe=(e,t)=>{for(var r in t||(t={}))te.call(t,r)&&ne(e,r,t[r]);if(ee)for(var r of ee(t))re.call(t,r)&&ne(e,r,t[r]);return e};function ie(e,t,r){var n;const o={updates:{},path:[]};function i(e){if("Value"===e.name)return e.value;if("PathNode"===e.name){const n=ie(e,t);n.updates&&(o.updates=oe(oe({},o.updates),n.updates));try{return t.convertToPath(t.getValue(n.path))}catch(r){throw new(f())(`Unable to resolve path segment: ${n.path}`,r)}}if("Expression"===e.name)try{const r=t.evaluate(e.value);return t.convertToPath(r)}catch(r){throw new(f())(`Unable to resolve path: ${e.value}`,r)}throw new Error(`Unable to resolve value for node: ${e.name}`)}function a(e){"string"===typeof e&&e.indexOf(".")>-1?e.split(".").forEach((e=>{o.path.push(function(e){const t=parseInt(e,10);return isNaN(t)?e:t}(e))})):o.path.push(e)}return e.path.forEach((function(e){var n,s;const l=null!=(n=null==r?void 0:r.beforeResolveNode.call(e,oe(oe({},o),t)))?n:e;switch(l.name){case"Expression":case"PathNode":a(i(l));break;case"Value":a(l.value);break;case"Query":{const e=null!=(s=t.getValue(o.path))?s:[],{key:r,value:n}=l,a=i(r),u=n&&i(n),c=function(e,t,r){return e.findIndex((e=>!(!e||"object"!==typeof e)&&e[t]==r))}(e,a,u);void 0===c||-1===c?(o.updates[[...o.path,e.length,a].join(".")]=u,o.path.push(e.length)):o.path.push(c);break}case"Concatenated":o.path.push(l.value.map(i).join(""));break;default:throw new Error(`Unsupported node type: ${l.name}`)}})),{path:o.path,updates:Object.keys(null!=(n=o.updates)?n:{}).length>0?o.updates:void 0}}var ae=Object.defineProperty,se=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pe=(e,t)=>{for(var r in t||(t={}))le.call(t,r)&&ce(e,r,t[r]);if(se)for(var r of se(t))ue.call(t,r)&&ce(e,r,t[r]);return e};const fe=/^[\w\-@]+(\.[\w\-@]+)*$/,he={get:()=>{throw new Error("Not Implemented")},set:()=>{throw new Error("Not Implemented")},evaluate:()=>{throw new Error("Not Implemented")}};class de{constructor(e){this.hooks={skipOptimization:new s,beforeResolveNode:new l},this.parserOptions=pe(pe({},he),e),this.cache={},this.parseCache={},this.parse=this.parse.bind(this)}normalizePath(e,t){var r,n;if(e.match(fe)&&!0!==this.hooks.skipOptimization.call(e))return{path:e.split("."),updates:void 0};const o=null!=(r=this.parseCache[e])?r:J(e);if(this.parseCache[e]=o,"object"!==typeof o||!(null==o?void 0:o.status))throw new TypeError(`Cannot normalize path "${e}": ${null!=(n=null==o?void 0:o.error)?n:"Unknown Error."}`);try{return ie(o.path,t,this.hooks)}catch(i){throw new(f())(`Cannot resolve binding: ${e}`,i)}}getBindingForNormalizedResult(e){const t=e.path.join(".");if(this.cache[t])return this.cache[t];const r=new Q(""===t?[]:e.path,this.parse);return this.cache[t]=r,r}parse(e,t={}){if(Z(e))return e;const r=pe(pe({},this.parserOptions),t);let n={};const o=Array.isArray(e)?e.join("."):String(e),i={getValue:e=>{const t=this.normalizePath(e.join("."),i);return r.get(this.getBindingForNormalizedResult(t))},evaluate:e=>r.evaluate(e),convertToPath:e=>{if(void 0===e)throw new Error("Attempted to convert undefined value to binding path");if("string"!==typeof e&&"number"!==typeof e&&"boolean"!==typeof e)throw new Error(`Attempting to convert ${typeof e} to a binding path.`);const t=this.normalizePath(String(e),i);t.updates&&(n=pe(pe({},n),t.updates));const r=t.path.join(".");if(""===r)throw new Error("Nested path resolved to an empty path");return r}},a=this.normalizePath(o,i);a.updates&&(n=pe(pe({},n),a.updates));const s=Object.keys(n);if(s.length>0){const e=s.map((e=>[this.parse(e),n[e]]));r.set(e)}return this.getBindingForNormalizedResult(a)}}class ye{constructor(){this.readDeps=new Set,this.writeDeps=new Set,this.namedDependencySets={},this.namedSet="core",this.createSubset("core"),this.createSubset("children")}createSubset(e,t=!1){!t&&this.namedDependencySets[e]||(this.namedDependencySets[e]={readDeps:new Set,writeDeps:new Set})}getDependencies(e){var t,r,n;return void 0!==e?null!=(n=null==(r=null==(t=this.namedDependencySets)?void 0:t[e])?void 0:r.readDeps)?n:new Set:this.readDeps}trackSubset(e){this.createSubset(e),this.namedSet=e}trackDefault(){this.namedSet="core"}getModified(e){var t,r,n;return void 0!==e?null!=(n=null==(r=null==(t=this.namedDependencySets)?void 0:t[e])?void 0:r.writeDeps)?n:new Set:this.writeDeps}readsBinding(e){return this.readDeps.has(e)}writesBinding(e){return this.writeDeps.has(e)}reset(){this.readDeps=new Set,this.writeDeps=new Set,this.namedDependencySets={},this.namedSet="core",this.createSubset("core",!0),this.createSubset("children",!0)}addReadDep(e,t=this.namedSet){var r,n;t&&(null==(n=null==(r=this.namedDependencySets)?void 0:r[t])||n.readDeps.add(e)),this.readDeps.add(e)}addWriteDep(e,t=this.namedSet){var r,n;t&&(null==(n=null==(r=this.namedDependencySets)?void 0:r[t])||n.writeDeps.add(e)),this.writeDeps.add(e)}addChildReadDep(e){this.addReadDep(e,"children")}}class ge extends ye{constructor(e){super(),this.rootModel=e,this.set=this.set.bind(this),this.get=this.get.bind(this)}set(e,t){return e.forEach((([e])=>this.addWriteDep(e))),this.rootModel.set(e,t)}get(e,t){return this.addReadDep(e),this.rootModel.get(e,t)}}const ve=new class{get(){}set(){return[]}},me=new Q([]);function be(e,t,r){return r?{get:(n,o)=>e.get(n,null!=o?o:t,r),set:(n,o)=>e.set(n,null!=o?o:t,r)}:e}function we(e){if(0===e.length)return ve;if(1===e.length)return e[0];function t(t){var r;return null!=(r=e.reduce(((e,r)=>be(r,t,e)),void 0))?r:ve}return{get:(e,r)=>{var n;return null==(n=t(r))?void 0:n.get(e,r)},set:(e,r)=>{var n;return null==(n=t(r))?void 0:n.set(e,r)}}}class Ee{constructor(e=[]){this.hooks={onSet:new a},this.pipeline=e,this.effectiveDataModel=we(this.pipeline)}setMiddleware(e){this.pipeline=e,this.effectiveDataModel=we(e)}addMiddleware(e){this.pipeline=[...this.pipeline,e],this.effectiveDataModel=we(this.pipeline)}reset(e={}){this.pipeline.forEach((e=>{var t;"reset"in e&&(null==(t=e.reset)||t.call(e))})),this.set([[me,e]])}set(e,t){const r=this.effectiveDataModel.set(e,t);return this.hooks.onSet.call(e),r}get(e,t){return this.effectiveDataModel.get(e,t)}}class Se{constructor(e={}){this.model=e,this.get=this.get.bind(this),this.set=this.set.bind(this)}reset(e={}){this.model=e}get(e){return e&&e.asString()?b()(this.model,e.asArray()):this.model}set(e){const t=[];return e.forEach((([e,r])=>{const n=this.get(e);this.model=(0,w.tP)(this.model,e.asArray(),r),t.push({binding:e,oldValue:n,newValue:r})})),t}}const Oe=Symbol("Expression Node ID");const Pe=46,xe=40,Ae=123,Re=125,ke=!0,je={"-":ke,"!":ke,"~":ke,"+":ke},_e={"=":3,"+=":3,"-=":3,"&=":3,"|=":3,"||":5,"&&":6,"|":7,"^":8,"&":9,"==":10,"!=":10,"===":10,"!==":10,"<":11,">":11,"<=":11,">=":11,"<<":12,">>":12,">>>":12,"+":13,"-":13,"*":14,"/":14,"%":14};function Ce(e,t){const r=new Error(`${e} at character ${t}`);throw r.index=t,r.description=e,r}function Te(e,t){if(e&&t)return{start:e.start,end:t.end}}function Ue(e){let t=0;return Object.keys(e).forEach((r=>{r.length>t&&Object.prototype.hasOwnProperty.call(e,r)&&(t=r.length)})),t}const Be=Ue(je),Ie=Ue(_e),Ne={true:!0,false:!1,null:null,undefined:void 0};function De(e){return _e[e]||0}function Le(e,t,r,n){let o;return o="||"===e||"&&"===e?"LogicalExpression":"="===e?"Assignment":"+="===e||"-="===e||"&="===e||"|="===e?"Modification":"BinaryExpression",{__id:Oe,type:o,operator:e,left:t,right:r,location:n}}function Me(e){return e>=48&&e<=57}function Ve(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122}function Fe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57}function $e(e){const t=e.charAt,r=e.charCodeAt,{length:n}=e;let o=0;const i=e=>({start:{character:e},end:{character:o}});function a(r){return t.call(e,r)}function s(t){return r.call(e,t)}function l(){let e=s(o);for(;32===e||9===e;)e=s(++o)}function u(){const e=function(){let e,t,r,n=p(),i=c();if(!i)return n;let a={value:i,prec:De(i)},s=p();s||Ce(`Expected expression after ${i}`,o);const l=[n,a,s];i=c();for(;i&&(t=De(i),0!==t);){for(a={value:i,prec:t};l.length>2&&t<=l[l.length-2].prec;)s=l.pop(),i=l.pop().value,n=l.pop(),e=Le(i,n,s,Te(n.location,s.location)),l.push(e);e=p(),e||Ce(`Expected expression after ${i}`,o),l.push(a,e),i=c()}r=l.length-1,e=l[r];for(;r>1;)e=Le(l[r-1].value,l[r-2],e,Te(l[r-2].location,e.location)),r-=2;return e}();l();const t=o;if(o<n&&63===s(o)){o++;const r=u();if(r||Ce("Expected expression",o),l(),58===s(o)){o++;const n=u();return n||Ce("Expected expression",o),{__id:Oe,type:"ConditionalExpression",test:e,consequent:r,alternate:n,location:i(t)}}Ce("Expected :",o)}return e}function c(){l();let t=e.substr(o,Ie),r=t.length;for(;r>0;){if(Object.prototype.hasOwnProperty.call(_e,t))return o+=r,t;t=t.substr(0,--r)}return!1}function p(){l();const t=s(o),r=o;if(Me(t)||46===t)return function(){let e="";const t=o;for(;Me(s(o));)e+=a(o++);if(s(o)===Pe)for(e+=a(o++);Me(s(o));)e+=a(o++);let r=a(o);if("e"===r||"E"===r){for(e+=a(o++),r=a(o),"+"!==r&&"-"!==r||(e+=a(o++));Me(s(o));)e+=a(o++);Me(s(o-1))||Ce(`Expected exponent (${e}${a(o)})`,o)}const n=s(o);Ve(n)?Ce(`Variable names cannot start with a number (${e}${a(o)})`,o):n===Pe&&Ce("Unexpected period",o);return{__id:Oe,type:"Literal",value:parseFloat(e),raw:e,location:i(t)}}();if(39===t||34===t)return f();if(Ve(t)||40===t)return function(){let e=s(o),t=e===xe?function(){o++;const e=u();if(l(),41===s(o))return o++,e;Ce("Unclosed (",o)}():h();const r=o;l(),e=s(o);for(;e===Pe||91===e||e===xe;)o++,e===Pe?(l(),t={__id:Oe,type:"MemberExpression",computed:!1,object:t,property:h(),location:i(r)}):91===e?(t={__id:Oe,type:"MemberExpression",computed:!0,object:t,property:u(),location:i(r)},l(),e=s(o),93!==e&&Ce("Unclosed [",o),o++):e===xe&&(t={__id:Oe,type:"CallExpression",args:d(41),callTarget:t,location:i(r)}),l(),e=s(o);return t}();if(91===t)return function(){const e=o;return o++,{__id:Oe,type:"ArrayExpression",elements:d(93),location:i(e)}}();if(c=t,y=s(o+1),c===Ae&&y===Ae)return function(){let e="",t=!1,r=1;const l=o;o+=2;for(;o<n;){const n=a(o++);if("}"===n&&s(o)===Re){if(o++,r--,0===r){t=!0;break}e+="}}"}else"{"===n&&s(o)===Ae?(r++,e+="{{",o++):e+=n}t||Ce(`Unclosed brace after "${e}"`,o);return{__id:Oe,type:"ModelRef",ref:e,location:i(l)}}();var c,y;if(t===Ae)return function(){const e=[];let t,r,a,c=!1,p=!0;const h=o;for(++o;o<n;){if(l(),a=s(o),125===a){t&&Ce("A key was defined but a value was not",o),o++,c=!0;break}p?(39!==a&&34!==a&&Ce("An object must start wtih a key",o),t=f(),l(),58===s(o)?(o++,p=!1):Ce("A colon must follow an object key",o)):(r=u(),e.push({key:t,value:r}),l(),a=s(o),44===a?o++:125!==a&&Ce("Please add a comma to add another key",o),p=!0,t=void 0,r=void 0),a=s(o)}return c||Ce("Unclosed brace in object",o),{__id:Oe,type:"Object",attributes:e,location:i(h)}}();let g=e.substr(o,Be),v=g.length;for(;v>0;){if(Object.prototype.hasOwnProperty.call(je,g))return o+=v,{__id:Oe,type:"UnaryExpression",operator:g,argument:p(),prefix:!0,location:i(r)};g=g.substr(0,--v)}return!1}function f(){const e=a(o++);let t="",r=!1;const s=o;for(;o<n;){let n=a(o++);if(n===e){r=!0;break}if("\\"===n)switch(n=a(o++),n){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v"}else t+=n}return r||Ce(`Unclosed quote after "${t}"`,o),{__id:Oe,type:"Literal",value:t,raw:`${e}${t}${e}`,location:i(s)}}function h(){const t=o;let r=s(t);for(Ve(r)?o++:Ce(`Unexpected ${a(o)}`,o);o<n&&(r=s(o),Fe(r));)o++;const l=e.slice(t,o);return Object.prototype.hasOwnProperty.call(Ne,l)?{__id:Oe,type:"Literal",value:Ne[l],raw:l,location:i(t)}:"this"===l?{__id:Oe,type:"ThisExpression",location:i(t)}:{__id:Oe,type:"Identifier",name:l,location:i(t)}}function d(e){const t=[];let r,i;for(;o<n;){if(l(),r=s(o),r===e){o++;break}44!==r?(i=u(),i&&"Compound"!==i.type||Ce("Expected comma",o),t.push(i)):o++}return t}const y=[];for(;o<n;){const e=s(o);if(59===e||44===e){o++;continue}const t=u();t?y.push(t):o<n&&Ce(`Unexpected "${a(o)}"`,o)}return 1===y.length?y[0]:{__id:Oe,type:"Compound",body:y,location:i(0)}}var ze=Object.freeze({__proto__:null,setDataVal:(e,t,r)=>{e.model.set([[t,r]])},getDataVal:(e,t)=>e.model.get(t),deleteDataVal:(e,t)=>e.model.set([[t,void 0]])}),We=Object.defineProperty,He=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,Je=(e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ze=(e,t)=>{for(var r in t||(t={}))Ge.call(t,r)&&Je(e,r,t[r]);if(Ye)for(var r of Ye(t))Ke.call(t,r)&&Je(e,r,t[r]);return e},Qe=(e,t)=>He(e,qe(t));const Xe=(e,t,r)=>e.evaluate(t)&&e.evaluate(r);Xe.resolveParams=!1;const et=(e,t,r)=>e.evaluate(t)||e.evaluate(r);et.resolveParams=!1;const tt={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,"&&":Xe,"||":et,"!==":(e,t)=>e!==t,"===":(e,t)=>e===t,"|":(e,t)=>e|t,"&":(e,t)=>e&t,"+=":(e,t)=>e+t,"-=":(e,t)=>e-t,"&=":(e,t)=>e&t,"|=":(e,t)=>e|t},rt={"-":e=>-e,"+":e=>Number(e),"!":e=>!e};class nt{constructor(e){this.vars={},this.hooks={resolve:new l,onError:new s},this.expressionsCache=new Map,this.operators={binary:new Map(Object.entries(tt)),unary:new Map(Object.entries(rt)),expressions:new Map(Object.entries(ze))},this.defaultHookOptions=Qe(Ze({},e),{evaluate:e=>this.evaluate(e,this.defaultHookOptions),resolveNode:e=>this._execAST(e,this.defaultHookOptions)}),this.hooks.resolve.tap("ExpressionEvaluator",this._resolveNode.bind(this)),this.evaluate=this.evaluate.bind(this)}reset(){this.expressionsCache.clear()}evaluate(e,t){const r=Qe(Ze(Ze({},this.defaultHookOptions),t),{resolveNode:e=>this._execAST(e,r)});if("number"===typeof e||"boolean"===typeof e||void 0===e||null===e)return e;if("object"===typeof(n=e)&&n.__id===Oe)return this._execAST(e,r);var n;if("object"===typeof e){return(Array.isArray(e)?e:Object.values(e)).reduce(((e,r)=>this.evaluate(r,t)),null)}return this._execString(String(e),r)}addExpressionFunction(e,t){this.operators.expressions.set(e,t)}addBinaryOperator(e,t){this.operators.binary.set(e,t)}addUnaryOperator(e,t){this.operators.unary.set(e,t)}setExpressionVariable(e,t){this.vars[e]=t}getExpressionVariable(e){return this.vars[e]}_execAST(e,t){return this.hooks.resolve.call(void 0,e,t)}_execString(e,t){if(""===e)return e;const r=e.match(/^@\[(.*)\]@$/);let n=e;r&&([,n]=Array.from(r));try{const e=this.expressionsCache.get(n);if(e)return this._execAST(e,t);const r=$e(n);return this.expressionsCache.set(n,r),this._execAST(r,t)}catch(o){if(!this.hooks.onError.call(o))throw o}}_resolveNode(e,t,r){const{resolveNode:n,model:o}=r,i=Qe(Ze({},r),{evaluate:e=>this.evaluate(e,r)});if("Literal"===t.type)return t.value;if("Identifier"===t.type)return this.vars[t.name];if("Compound"===t.type||"ThisExpression"===t.type)throw new Error(`Expression type: ${t.type} is not supported`);if("BinaryExpression"===t.type||"LogicalExpression"===t.type){const e=this.operators.binary.get(t.operator);return e?"resolveParams"in e?!1===e.resolveParams?e(i,t.left,t.right):e(i,n(t.left),n(t.right)):e(n(t.left),n(t.right)):void 0}if("UnaryExpression"===t.type){const e=this.operators.unary.get(t.operator);return e?"resolveParams"in e?e(i,!1===e.resolveParams?t.argument:n(t.argument)):e(n(t.argument)):void 0}if("Object"===t.type){const{attributes:e}=t,r={};return e.forEach((e=>{const t=n(e.key),o=n(e.value);r[t]=o})),r}if("CallExpression"===t.type){const e=t.callTarget.name;if("conditional"===e){return n(t.args[0])?n(t.args[1]):t.args[2]?n(t.args[2]):null}const r=this.operators.expressions.get(e);if(!r)throw new Error(`Unknown expression function: ${e}`);return r(i,...t.args.map((e=>n(e))))}if("ModelRef"===t.type)return o.get(t.ref);if("MemberExpression"===t.type){return n(t.object)[n(t.property)]}if("Assignment"!==t.type){if("ConditionalExpression"===t.type){const e=n(t.test)?t.consequent:t.alternate;return n(e)}if("ArrayExpression"===t.type)return t.elements.map((e=>n(e)));if("Modification"===t.type){const e=this.operators.binary.get(t.operator);if(e){let r;return r="resolveParams"in e?!1===e.resolveParams?e(i,t.left,t.right):e(i,n(t.left),n(t.right)):e(n(t.left),n(t.right)),"ModelRef"===t.left.type?o.set([[t.left.ref,r]]):"Identifier"===t.left.type&&(this.vars[t.left.name]=r),r}return n(t.left)}}else{if("ModelRef"===t.left.type){const e=n(t.right);return o.set([[t.left.ref,e]]),e}if("Identifier"===t.left.type){const e=n(t.right);return this.vars[t.left.name]=e,e}}}}const ot=()=>{};class it{constructor(){this.hooks={trace:new a,debug:new a,info:new a,warn:new a,error:new a,log:new a},this.logHandlers=new Set,this.trace=this.createHandler("trace"),this.debug=this.createHandler("debug"),this.info=this.createHandler("info"),this.warn=this.createHandler("warn"),this.error=this.createHandler("error")}createHandler(e){return(...t)=>{this.hooks[e].call(t),this.hooks.log.call(e,t),this.logHandlers.forEach((r=>r[e](...t)))}}addHandler(e){this.logHandlers.add(e)}removeHandler(e){this.logHandlers.delete(e)}}class at{constructor(e){this.trace=this.createHandler("trace"),this.debug=this.createHandler("debug"),this.info=this.createHandler("info"),this.warn=this.createHandler("warn"),this.error=this.createHandler("error"),this.proxiedLoggerProvider=e}createHandler(e){return(...t)=>{const r=this.proxiedLoggerProvider();null==r||r[e](...t)}}}var st=Object.defineProperty,lt=Object.defineProperties,ut=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,ht=(e,t,r)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t)=>{for(var r in t||(t={}))pt.call(t,r)&&ht(e,r,t[r]);if(ct)for(var r of ct(t))ft.call(t,r)&&ht(e,r,t[r]);return e};const yt=e=>e;class gt{constructor(e){this.formatters=new Map,this.types=new Map,this.schema=new Map,this.bindingSchemaNormalizedCache=new Map,this.hooks={resolveTypeForBinding:new l},this.schema=e?function(e){const t=new Map;if(!e.ROOT)return t;const r=[{node:e.ROOT,path:[],visited:new Set}];for(;r.length>0;){const n=r.shift();if(!n)break;const{node:o,path:i,visited:a}=n;Object.entries(o).forEach((([n,o])=>{const s=[...i,n],l=s.join(".");if(t.has(l))throw new Error("Path has already been processed. There's either a loop somewhere or a bug");if(a.has(o.type))throw new Error(`Path already contained type: ${o.type}. This likely indicates a loop in the schema`);t.set(l,o),o.isArray&&s.push("[]"),o.type&&e[o.type]&&r.push({path:s,node:e[o.type],visited:new Set([...a,o.type])})}))}return t}(e):new Map}addFormatters(e){e.forEach((e=>{this.formatters.set(e.name,e)}))}addDataTypes(e){e.forEach((e=>{this.types.set(e.type,e)}))}getValidationsForBinding(e){var t;const r=this.getApparentType(e);if(null==(t=null==r?void 0:r.validation)?void 0:t.length)return r.validation.map((e=>dt({severity:"error",trigger:"change"},e)))}normalizeBinding(e){const t=this.bindingSchemaNormalizedCache.get(e);if(t)return t;const r=e.asArray().map((e=>"number"===typeof e?"[]":e)).join(".");return this.bindingSchemaNormalizedCache.set(e,r),r}getType(e){return this.hooks.resolveTypeForBinding.call(this.schema.get(this.normalizeBinding(e)),e)}getApparentType(e){var t,r;const n=this.getType(e);if(void 0===n)return;const o=this.getTypeDefinition(null==n?void 0:n.type);return void 0===o?n:(i=dt(dt({},o),n),a={validation:[...null!=(t=n.validation)?t:[],...null!=(r=o.validation)?r:[]]},lt(i,ut(a)));var i,a}getTypeDefinition(e){return this.types.get(e)}getFormatterForType(e){const t=e,{type:r}=t,n=((e,t)=>{var r={};for(var n in e)pt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ct)for(var n of ct(e))t.indexOf(n)<0&&ft.call(e,n)&&(r[n]=e[n]);return r})(t,["type"]),o=this.formatters.get(r);if(o)return{format:o.format?e=>{var t;return null==(t=o.format)?void 0:t.call(o,e,n)}:yt,deformat:o.deformat?e=>{var t;return null==(t=o.deformat)?void 0:t.call(o,e,n)}:yt}}getFormatter(e){const t=this.getApparentType(e);if(null==t?void 0:t.format)return this.getFormatterForType(t.format)}}const vt="{{",mt="}}";function bt(e){const t=e.indexOf(vt);if(-1===t)return;let r=1,n=t+vt.length,o=e.substring(t+vt.length);for(;r>0&&o.length>0;){const e=o.indexOf(mt);if(-1===e)break;const t=o.indexOf(vt);-1!==t&&t<e?(r++,o=o.substring(t+vt.length),n+=t+vt.length):(r--,o=o.substring(e+mt.length),n+=e+mt.length)}if(0!==r)throw new Error(`Unbalanced {{ and }} in exp: ${e}`);return{start:t,end:n}}function wt(e,t){const{model:r}=t;let n=function(e,{evaluate:t}){const r=/@\[.*?\]@/;let n=e,o=n.match(r);for(;null!==o;){const i=o[0],a=n.indexOf(i),s=t(i.substr("@[".length,i.length-"@[".length-"]@".length));if(0===a&&i===e&&"string"!==typeof s)return s;n=n.substr(0,a)+s+n.substr(a+i.length),o=n.match(r)}return n}(e,t);if("string"!==typeof n||-1===n.indexOf(vt))return n;for(;-1!==n.indexOf(vt);){const e=bt(n);if(!e)return n;const{start:t,end:o}=e,i=n.substring(t+vt.length,o-vt.length).trim(),a=r.get(i,{formatted:!0});if(0===t&&o===n.length&&"string"!==typeof a)return a;n=n.substr(0,t)+a+n.substr(o)}return n}function Et(e,t){switch(typeof e){case"string":return wt(e,t);case"object":{if(!e)return e;const r=Object.keys(e);let n=e;if(r.length>0)for(const o of r)n=(0,w.tP)(n,[o],Et(e[o],t));return n}default:return e}}function St(e,t){return Et(e,t)}var Ot,Pt,xt=Object.defineProperty,At=Object.defineProperties,Rt=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,Ct=(e,t,r)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Tt{constructor(e,t){this.validator=e,this.shadowModelPaths=new Map,this.logger=null==t?void 0:t.logger}set(e,t,r){const n=be(this,(o=((e,t)=>{for(var r in t||(t={}))jt.call(t,r)&&Ct(e,r,t[r]);if(kt)for(var r of kt(t))_t.call(t,r)&&Ct(e,r,t[r]);return e})({},t),At(o,Rt({includeInvalid:!0}))),r);var o;const i=[];e.forEach((([e,t])=>{this.shadowModelPaths.set(e,t)}));const a=[];if(this.shadowModelPaths.forEach(((e,t)=>{var r;const o=this.validator(t,n);void 0===o?i.push([t,e]):o instanceof Set?o.forEach((t=>{a.push(t.binding),t.isStrong||i.push([t.binding,e])})):null==(r=this.logger)||r.debug(`Invalid value for path: ${t.asString()} - ${o.severity} - ${o.message}`)})),r&&i.length>0){i.forEach((([e])=>this.shadowModelPaths.delete(e)));const e=r.set(i,t);if(0===a.length)return e}return a.map((e=>({binding:e,oldValue:n.get(e),newValue:n.get(e),force:!0})))}get(e,t,r){let n=null==r?void 0:r.get(e,t);return!0===(null==t?void 0:t.includeInvalid)&&this.shadowModelPaths.forEach(((t,r)=>{r!==e?e.contains(r)&&(n=(0,w.tP)(n,r.relative(e),t)):n=t})),n}}class Ut{constructor(){this.registry=new Map}get(e){return this.registry.get(e)}register(e,t){this.registry.set(e,t)}}(Pt=Ot||(Ot={})).Asset="asset",Pt.View="view",Pt.Applicability="applicability",Pt.Template="template",Pt.Value="value",Pt.MultiNode="multi-node",Pt.Switch="switch",Pt.Unknown="unknown",Pt.Empty="empty";var Bt=Object.defineProperty,It=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,Vt=(e,t,r)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ft=(e,t)=>{for(var r in t||(t={}))Lt.call(t,r)&&Vt(e,r,t[r]);if(Dt)for(var r of Dt(t))Mt.call(t,r)&&Vt(e,r,t[r]);return e},$t=(e,t)=>It(e,Nt(t));const zt={type:Ot.Empty};class Wt{constructor(){this.hooks={onParseObject:new l,onCreateASTNode:new l,determineNodeType:new s,parseNode:new s}}parseView(e){const t=this.parseObject(e,Ot.View);if(!t)throw new Error("Unable to parse object into a view");return t}createASTNode(e,t){const r=this.hooks.onCreateASTNode.call(e,t);return void 0===r?e:r}parseObject(e,t=Ot.Value,r={templateDepth:0}){var n;const o=this.hooks.determineNodeType.call(e);if(void 0!==o){const n=this.hooks.parseNode.call(e,t,r,o);if(n)return n}const i=(e,n,o=[])=>{if("object"!==typeof n||null===n)return{value:n,children:[]};const a=this.hooks.onParseObject.call(n,t);if(!a)return e;const s={children:[],value:e};return(Array.isArray(a)?a.map(((e,t)=>[t,e])):Object.entries(a)).reduce(((e,n)=>{const a=e,{children:s}=a,l=((e,t)=>{var r={};for(var n in e)Lt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Dt)for(var n of Dt(e))t.indexOf(n)<0&&Mt.call(e,n)&&(r[n]=e[n]);return r})(a,["children"]),[u,c]=n;if("asset"===u&&"object"===typeof c){const e=this.parseObject(c,Ot.Asset,r);if(e)return $t(Ft({},l),{children:[...s,{path:[...o,"asset"],value:e}]})}else{if(this.hooks.determineNodeType.call(u)===Ot.Template&&Array.isArray(c)){const e=c.map((e=>{var t,n;const i=this.hooks.onCreateASTNode.call({type:Ot.Template,depth:null!=(t=r.templateDepth)?t:0,data:e.data,template:e.value,dynamic:null!=(n=e.dynamic)&&n},e);if(i)return{path:[...o,e.output],value:i}})).filter((e=>!!e));return $t(Ft({},l),{children:[...s,...e]})}if(c&&this.hooks.determineNodeType.call(c)===Ot.Switch){const e=this.hooks.parseNode.call(c,Ot.Value,r,Ot.Switch);if(e)return $t(Ft({},l),{children:[...s,{path:[...o,u],value:e}]})}else if(c&&Array.isArray(c)){const e=c.map((e=>this.parseObject(e,Ot.Value,r))).filter((e=>!!e));if(e.length>0){const t=this.hooks.onCreateASTNode.call({type:Ot.MultiNode,override:!0,values:e},c);if((null==t?void 0:t.type)===Ot.MultiNode&&t.values.forEach((e=>{e.parent=t})),t)return $t(Ft({},l),{children:[...s,{path:[...o,u],value:t}]})}}else{if(!c||"object"!==typeof c){return{children:s,value:(0,w.tP)(e.value,[...o,u],c)}}{const n=this.hooks.determineNodeType.call(c);if(n!==Ot.Applicability){const t=i(e.value,c,[...o,u]);return{value:t.value,children:[...s,...t.children]}}{const e=this.hooks.parseNode.call(c,t,r,n);if(e)return $t(Ft({},l),{children:[...s,{path:[...o,u],value:e}]})}}}}return e}),s)},{value:a,children:s}=i(void 0,e),l=void 0===a&&0===s.length?void 0:{type:t,value:a};if(void 0!==l&&s.length>0){const e=l;e.children=s,s.forEach((t=>{t.value.parent=e}))}return null!=(n=this.hooks.onCreateASTNode.call(l,e))?n:null}}var Ht=Object.defineProperty,qt=Object.defineProperties,Yt=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable,Zt=(e,t,r)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Qt(e,t){if(!e||!t)return!0;const r=Array.from(t.values()),n=Array.from(e.values());return void 0!==r.find((e=>!!n.find((t=>t===e||t.contains(e)||e.contains(t)))))}function Xt(e){return t=((e,t)=>{for(var r in t||(t={}))Kt.call(t,r)&&Zt(e,r,t[r]);if(Gt)for(var r of Gt(t))Jt.call(t,r)&&Zt(e,r,t[r]);return e})({},e),r={data:{model:e.model,formatValue:(t,r)=>e.formatValue?e.formatValue(t,r):r,format:(t,r)=>e.format?e.format(Z(t)?t:e.parseBinding(t),r):r},evaluate:t=>e.evaluator.evaluate(t,e)},qt(t,Yt(r));var t,r}var er=Object.defineProperty,tr=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,ir=Object.prototype.propertyIsEnumerable,ar=(e,t,r)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sr=(e,t)=>{for(var r in t||(t={}))or.call(t,r)&&ar(e,r,t[r]);if(nr)for(var r of nr(t))ir.call(t,r)&&ar(e,r,t[r]);return e},lr=(e,t)=>tr(e,rr(t));class ur{constructor(e,t){this.hooks={skipResolve:new l,beforeUpdate:new a,afterUpdate:new a,resolveOptions:new l,beforeResolve:new l,resolve:new l,afterResolve:new l,afterNodeUpdate:new a},this.root=e,this.options=t,this.resolveCache=new Map,this.ASTMap=new Map,this.logger=t.logger,this.idCache=new Set}getSourceNode(e){return this.ASTMap.get(e)}update(e){this.hooks.beforeUpdate.call(e);const t=new Map;this.idCache.clear(),this.ASTMap.clear();const r=this.computeTree(this.root,void 0,e,t,Xt(this.options));return this.resolveCache=t,this.hooks.afterUpdate.call(r.value),r.value}getNodeID(e){var t;if(e)return e.type!==Ot.Asset&&e.type!==Ot.View&&e.type!==Ot.Value||"object"!==typeof e.value||"string"!==typeof(null==(t=e.value)?void 0:t.id)?void 0:e.value.id}getPreviousResult(e){var t,r;if(!e)return;const n=0===this.resolveCache.size,o=this.getNodeID(e);if(o){if(this.idCache.has(o))return void(n&&(e.type===Ot.Asset||e.type===Ot.View?null==(t=this.logger)||t.error(`Cache conflict: Found Asset/View nodes that have conflicting ids: ${o}, may cause cache issues.`):e.type===Ot.Value&&(null==(r=this.logger)||r.info(`Cache conflict: Found Value nodes that have conflicting ids: ${o}, may cause cache issues. To improve performance make value node IDs globally unique.`))));this.idCache.add(o)}return this.resolveCache.get(e)}computeTree(e,t,r,n,o){var i,a;const s=new ge(o.data.model);s.trackSubset("core");const l=(u=function(e,t){function r(r){const n=Z(r)?r:t(r,{get:e.get,set:e.set});if(!n)throw new Error("Unable to parse binding");return n}return{get:(t,n)=>e.get(r(t),n),set:(t,n)=>e.set(t.map((([e,t])=>[r(e),t])),n)}}(s,this.options.parseBinding),{get:(e,t)=>u.get(e,sr({context:{model:u}},t)),set:(e,t)=>u.set(e,sr({context:{model:u}},t))});var u;const c=this.hooks.resolveOptions.call(lr(sr({},o),{data:lr(sr({},o.data),{model:l}),evaluate:e=>this.options.evaluator.evaluate(e,{model:l}),node:e}),e),p=this.getPreviousResult(e),f=null==p?void 0:p.dependencies,h=Qt(r,f);if(this.hooks.skipResolve.call(!h,e,c)&&p){const r=lr(sr({},p),{updated:!1});n.set(e,r);const o=(e,t)=>{var r;this.ASTMap.set(e,t),"children"in e&&(null==(r=e.children)||r.forEach((({value:e})=>{const{node:t}=this.getPreviousResult(e)||{};t&&(o(t,e),t.type===Ot.MultiNode&&t.values.forEach((e=>{const{node:t}=this.getPreviousResult(e)||{};t&&o(t,e)})))})))},i=p.node;return o(i,e),this.hooks.afterNodeUpdate.call(e,t,r),r}const d=null!=(i=this.hooks.beforeResolve.call(e,c))?i:{type:Ot.Empty};c.node=d,this.ASTMap.set(d,e);let y=this.hooks.resolve.call(void 0,d,c),g=!O(null==p?void 0:p.value,y);p&&!g&&(y=null==p?void 0:p.value);const v=new Set;s.trackSubset("children"),"children"in d&&(null==(a=d.children)||a.forEach((t=>{const o=this.computeTree(t.value,e,r,n,c);let{updated:i,value:a}=o;const{node:s,dependencies:l}=o;if(l.forEach((e=>v.add(e))),s.type===Ot.MultiNode&&(a=[],s.values.forEach((t=>{const o=this.computeTree(t,e,r,n,c);void 0!==o.value&&null!==o.value&&a.push(o.value),o.dependencies.forEach((e=>v.add(e))),i=i||o.updated}))),a)if(s.type!==Ot.MultiNode||s.override)y=(0,w.tP)(y,t.path,a);else{const e=(0,w.q5)(b()(y,t.path,[]),a);y=(0,w.tP)(y,t.path,e)}g=g||i}))),v.forEach((e=>s.addChildReadDep(e))),s.trackSubset("core"),p&&!g&&(y=null==p?void 0:p.value),y=this.hooks.afterResolve.call(y,d,lr(sr({},c),{getDependencies:e=>s.getDependencies(e)}));const m={node:d,updated:g,value:y,dependencies:new Set([...s.getDependencies(),...v])};return this.hooks.afterNodeUpdate.call(e,t,m),n.set(e,m),m}}class cr{constructor(e){this.hooks={resolveTemplateSubstitutions:new l},this.options=e}parseTemplate(e,t,r){const{template:n,depth:o}=t,i=r.data.model.get(t.data);if(!i)return null;if(!Array.isArray(i))throw new Error(`Template using '${t.data}' but is not an array`);const a=[];i.forEach(((r,i)=>{const s=this.hooks.resolveTemplateSubstitutions.call([{expression:new RegExp(`_index${o||""}_`),value:String(i)}],{depth:o,data:r,index:i});let l=JSON.stringify(n);for(const{expression:e,value:t}of s){let r="g";"object"===typeof e&&(r=`${e.flags}${e.global?"":"g"}`),l=l.replace(new RegExp(e,r),t)}const u=e(JSON.parse(l),Ot.Value,{templateDepth:t.depth+1});u&&a.push(u)}));const s={parent:t.parent,type:Ot.MultiNode,values:a};return s.values.forEach((e=>{e.parent=s})),s}applyParser(e){e.hooks.onCreateASTNode.tap("template",(t=>t&&t.type===Ot.Template&&!t.dynamic?this.parseTemplate(e.parseObject.bind(e),t,this.options):t)),e.hooks.determineNodeType.tap("template",(e=>{if("template"===e)return Ot.Template})),e.hooks.parseNode.tap("template",((t,r,n,o)=>{var i,a;if(o===Ot.Template){const r=e.createASTNode({type:Ot.Template,depth:null!=(i=n.templateDepth)?i:0,data:t.data,template:t.value,dynamic:null!=(a=t.dynamic)&&a},t);if(r)return r}}))}applyResolverHooks(e){e.hooks.beforeResolve.tap("template",((e,t)=>e&&e.type===Ot.Template&&e.dynamic?this.parseTemplate(t.parseNode,e,t):e))}apply(e){e.hooks.parser.tap("template",this.applyParser.bind(this)),e.hooks.resolver.tap("template",this.applyResolverHooks.bind(this))}}const pr=(e,t)=>r=>{const n=r.indexOf(e);if(-1===n)return!1;const o=r.indexOf(t);return-1!==o&&n<o},fr=pr("{{","}}"),hr=pr("@[","]@");function dr(e,t){return function(e){return fr(e)||hr(e)}(e)?St(e,{model:t.data.model,evaluate:t.evaluate}):e}function yr(e,t,r){if(null===e||void 0===e||"object"!==typeof e&&"string"!==typeof e)return e;if("string"===typeof e)return dr(e,t);let n=e;return Object.keys(e).forEach((o=>{if(r.has(o))return;const i=e[o];let a=i;"object"===typeof i?a=yr(i,t,r):"string"===typeof i&&(a=dr(i,t)),a!==i&&(n=(0,w.t8)(n,o,a))})),n}const gr=e=>{var t,r,n;const o=e.parent;return o?"children"in o?null!=(n=null==(r=null==(t=o.children)?void 0:t.find((t=>t.value===e)))?void 0:r.path)?n:[]:o.type!==Ot.MultiNode?[]:gr(o):[]};class vr{constructor(){this.propertiesToSkipCache=new Map}applyResolver(e){e.hooks.resolve.tap("string-resolver",((e,t,r)=>{var n,o,i,a,s,l,u,c,p,f;if(t.type===Ot.Empty||t.type===Ot.Unknown)return null;if(t.type===Ot.Value||t.type===Ot.Asset||t.type===Ot.View){let e;t.type===Ot.Asset||t.type===Ot.View?(e=new Set(null!=(i=null==(o=null==(n=t.plugins)?void 0:n.stringResolver)?void 0:o.propertiesToSkip)?i:["exp"]),(null==(a=t.value)?void 0:a.id)&&this.propertiesToSkipCache.set(t.value.id,e)):e=(null==(s=t.parent)?void 0:s.type)===Ot.MultiNode&&((null==(u=null==(l=t.parent)?void 0:l.parent)?void 0:u.type)===Ot.Asset||(null==(p=null==(c=t.parent)?void 0:c.parent)?void 0:p.type)===Ot.View)&&(null==(f=t.parent.parent.value)?void 0:f.id)&&this.propertiesToSkipCache.has(t.parent.parent.value.id)?this.propertiesToSkipCache.get(t.parent.parent.value.id):new Set(["exp"]);const h=gr(t);return h.length>0&&h.some((t=>e.has(t.toString())))?t.value:yr(t.value,r,e)}return e}))}apply(e){e.hooks.resolver.tap("string-resolver",this.applyResolver.bind(this))}}class mr{applyResolver(e){e.hooks.beforeResolve.tap("applicability",((e,t)=>{let r=e;if((null==e?void 0:e.type)===Ot.Applicability){if(!t.evaluate(e.expression))return null;r=e.value}return r}))}applyParser(e){e.hooks.determineNodeType.tap("applicability",(e=>{if(Object.prototype.hasOwnProperty.call(e,"applicability"))return Ot.Applicability})),e.hooks.parseNode.tap("applicability",((t,r,n,o)=>{if(o===Ot.Applicability){const o=e.parseObject((0,w.CE)(t,"applicability"),r,n);if(null!==o){const r=e.createASTNode({type:Ot.Applicability,expression:t.applicability,value:o},t);return(null==r?void 0:r.type)===Ot.Applicability&&(r.value.parent=r),r}}}))}apply(e){e.hooks.resolver.tap("applicability",this.applyResolver.bind(this)),e.hooks.parser.tap("applicability",this.applyParser.bind(this))}}var br=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable;class Sr{constructor(e){this.options=e}resolveSwitch(e,t){for(const r of e.cases){if(t.evaluate(r.case))return r.value}return zt}applyParser(e){e.hooks.onCreateASTNode.tap("switch",(e=>e&&e.type===Ot.Switch&&!e.dynamic?this.resolveSwitch(e,this.options):e)),e.hooks.determineNodeType.tap("switch",(e=>{if(Object.prototype.hasOwnProperty.call(e,"dynamicSwitch")||Object.prototype.hasOwnProperty.call(e,"staticSwitch"))return Ot.Switch})),e.hooks.parseNode.tap("switch",((t,r,n,o)=>{if(o===Ot.Switch){const r="dynamicSwitch"in t,o="dynamicSwitch"in t?t.dynamicSwitch:t.staticSwitch,i=[];o.forEach((t=>{const r=t,{case:o}=r,a=((e,t)=>{var r={};for(var n in e)wr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&br)for(var n of br(e))t.indexOf(n)<0&&Er.call(e,n)&&(r[n]=e[n]);return r})(r,["case"]),s=e.parseObject(a,Ot.Value,n);s&&i.push({case:o,value:s})}));const a=e.hooks.onCreateASTNode.call({type:Ot.Switch,dynamic:r,cases:i},t);return(null==a?void 0:a.type)===Ot.Switch&&a.cases.forEach((e=>{e.value.parent=a})),(null==a?void 0:a.type)===Ot.Empty?null:null!=a?a:null}}))}applyResolver(e){e.hooks.beforeResolve.tap("switch",((e,t)=>e&&e.type===Ot.Switch&&e.dynamic?this.resolveSwitch(e,t):e))}apply(e){e.hooks.parser.tap("switch",this.applyParser.bind(this)),e.hooks.resolver.tap("switch",this.applyResolver.bind(this))}}var Or=Object.defineProperty,Pr=Object.defineProperties,xr=Object.getOwnPropertyDescriptors,Ar=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,jr=(e,t,r)=>t in e?Or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_r=(e,t)=>{for(var r in t||(t={}))Rr.call(t,r)&&jr(e,r,t[r]);if(Ar)for(var r of Ar(t))kr.call(t,r)&&jr(e,r,t[r]);return e};class Cr{constructor(e,t,r){this.allValidations=new Set,this.byBinding=new Map,this.logger=r,this.parse(e,t)}parse(e,t){var r;const n=e.validation;void 0!==n&&(Array.isArray(n)?n.forEach((e=>{var r;const n=_r({trigger:"navigation",severity:"error"},e);this.allValidations.add(n);const{ref:o}=e;if(o){const e=t(o);this.byBinding.has(e)?null==(r=this.byBinding.get(e))||r.push(n):this.byBinding.set(e,[n])}})):null==(r=this.logger)||r.warn(`Unable to register view validations for id: ${e.id}. 'validation' property must be an Array.`))}getValidationsForBinding(e){return this.byBinding.get(e)}}class Tr{constructor(e,t){this.hooks={onUpdate:new a,parser:new a,resolver:new a,templatePlugin:new a},this.initialView=e,this.resolverOptions=t;const r=Xt(t);new Sr(r).apply(this),(new mr).apply(this),(new vr).apply(this),this.templatePlugin=new cr(r),this.templatePlugin.apply(this)}update(e){var t,r,n;if(void 0===this.rootNode){this.validationProvider=new Cr(this.initialView,this.resolverOptions.parseBinding,this.resolverOptions.logger),this.hooks.templatePlugin.call(this.templatePlugin);const e=new Wt;this.hooks.parser.call(e),this.rootNode=e.parseView(this.initialView),this.resolver=new ur(this.rootNode,(r=_r({},this.resolverOptions),n={parseNode:e.parseObject.bind(e)},Pr(r,xr(n)))),this.hooks.resolver.call(this.resolver)}const o=null==(t=this.resolver)?void 0:t.update(e);return this.lastUpdate===o?this.lastUpdate:(this.lastUpdate=o,this.hooks.onUpdate.call(o),o)}getValidationsForBinding(e){var t;return null==(t=this.validationProvider)?void 0:t.getValidationsForBinding(e)}}var Ur=Object.defineProperty,Br=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,Dr=(e,t,r)=>t in e?Ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lr=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{s(r.next(e))}catch(t){o(t)}},a=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}));class Mr{constructor(e,t,r){this.hooks={beforeStart:new s,onStart:new a,onEnd:new a,skipTransition:new s,beforeTransition:new l,resolveTransitionNode:new l,transition:new a},this.id=e,this.flow=t,this.log=null==r?void 0:r.logger,this.history=[],this.hooks.transition.tap("startPromise",((e,t)=>Lr(this,null,(function*(){const e=t.value;this.flowPromise&&"END"===e.state_type&&this.flowPromise.resolve(e)}))))}start(){return Lr(this,null,(function*(){var e;if(this.flowPromise)return null==(e=this.log)||e.warn("Already called start for flow"),this.flowPromise.promise;this.flow=this.hooks.beforeStart.call(this.flow)||this.flow,this.flow.onStart&&this.hooks.onStart.call(this.flow.onStart);const t=this.flow.startState;return t?(this.flowPromise=x()(),this.pushHistory(t),this.flowPromise.promise):Promise.reject(new Error("No 'startState' defined for flow"))}))}transition(e,t){var r,n,o,i,a,s;if("END"===(null==(r=this.currentState)?void 0:r.value.state_type))return void(null==(n=this.log)||n.warn(`Skipping transition using ${e}. Already at and END state`));if(void 0===this.currentState)throw new Error("Cannot transition when there's no current state");if(null==t?void 0:t.force)null==(o=this.log)||o.debug("Forced transition. Skipping validation checks");else{if(this.hooks.skipTransition.call(this.currentState))return void(null==(i=this.log)||i.debug(`Skipping transition from ${this.currentState} b/c hook told us to`))}const l=this.hooks.beforeTransition.call(this.currentState.value,e);if(!("transitions"in l))throw new Error(`No transitions defined for ${this.currentState.value}`);const{transitions:u}=l,c=u[e]||u["*"];if(void 0!==c)return null==(s=this.log)||s.debug(`Transitioning from ${this.currentState.name} to ${c} using ${e} `),this.pushHistory(c,t);null==(a=this.log)||a.warn(`No transition from ${this.currentState.name} using ${e} or *`)}pushHistory(e,t){var r;if(!Object.prototype.hasOwnProperty.call(this.flow,e))throw new Error(`No flow definition for: ${e} was found.`);let n=this.flow[e];if(!this.flow[e]||"object"!==typeof n||!("state_type"in n))return void(null==(r=this.log)||r.error(`Flow doesn't contain any states named: ${e}`));const o=this.currentState;n=this.hooks.resolveTransitionNode.call(n);const i={name:e,value:n};this.currentState=i,this.history.push(e),"END"===i.value.state_type&&this.flow.onEnd&&this.hooks.onEnd.call(this.flow.onEnd),this.hooks.transition.call(o,((e,t)=>{for(var r in t||(t={}))Ir.call(t,r)&&Dr(e,r,t[r]);if(Br)for(var r of Br(t))Nr.call(t,r)&&Dr(e,r,t[r]);return e})({},i))}}var Vr=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{s(r.next(e))}catch(t){o(t)}},a=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}));class Fr{constructor(e,t){this.hooks={flow:new a},this.navigation=e,this.navStack=[],this.log=null==t?void 0:t.logger,this.start=this.start.bind(this),this.run=this.run.bind(this),this.transition=this.transition.bind(this)}transition(e,t){if(void 0===this.current)throw new Error("Not currently in a flow. Cannot transition.");this.current.transition(e,t)}addNewFlow(e){return Vr(this,null,(function*(){this.navStack.push(e),this.current=e,e.hooks.transition.tap("flow-controller",((t,r)=>Vr(this,null,(function*(){var t,n;if("FLOW"===r.value.state_type){null==(t=this.log)||t.debug(`Got FLOW state. Loading flow ${r.value.ref}`);const o=yield this.run(r.value.ref);null==(n=this.log)||n.debug(`Flow ended. Using outcome: ${o.outcome}`),e.transition(o.outcome)}})))),this.hooks.flow.call(e)}))}run(e){return Vr(this,null,(function*(){var t;if(!Object.prototype.hasOwnProperty.call(this.navigation,e))return Promise.reject(new Error(`No flow defined for: ${e}`));const r=this.navigation[e];if(null===r||"object"!==typeof r)return Promise.reject(new Error(`Flow: ${e} needs to be an object`));null==(t=this.log)||t.debug(`Starting flow: ${e}`);const n=new Mr(e,r,{logger:this.log});this.addNewFlow(n);const o=yield n.start();if(this.navStack.pop(),this.navStack.length>0){const e=0;this.current=this.navStack[e]}return o}))}start(){return Vr(this,null,(function*(){return this.navigation.BEGIN?this.run(this.navigation.BEGIN):Promise.reject(new Error("Must supply a BEGIN state"))}))}}const $r=/%([a-zA-Z]+)/g;var zr=Object.defineProperty,Wr=Object.defineProperties,Hr=Object.getOwnPropertyDescriptors,qr=Object.getOwnPropertySymbols,Yr=Object.prototype.hasOwnProperty,Gr=Object.prototype.propertyIsEnumerable,Kr=(e,t,r)=>t in e?zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jr=(e,t)=>{for(var r in t||(t={}))Yr.call(t,r)&&Kr(e,r,t[r]);if(qr)for(var r of qr(t))Gr.call(t,r)&&Kr(e,r,t[r]);return e},Zr=(e,t)=>Wr(e,Hr(t));const Qr="validation-binding-tracker";class Xr{constructor(e){this.trackedBindings=new Set,this.options=e}getBindings(){return this.trackedBindings}applyResolver(e){this.trackedBindings.clear();const t=new Map,r=new Map,n=new Set;let o;const i=new Map;let a=new Map,s=new Map;const l=new Map;e.hooks.beforeUpdate.tap(Qr,(e=>{o=e})),e.hooks.skipResolve.tap(Qr,((e,t)=>{const r=a.get(t);if(!e||!o||!r)return e;return 0===new Set([...o].filter((e=>r.has(e)))).size})),e.hooks.resolveOptions.tap(Qr,((e,o)=>{if(void 0===e.validation)return e;t.delete(o);const i=e=>{var i,a,s,l;const u=Z(e)?e:this.options.parseBinding(e);t.has(o)?null==(i=t.get(o))||i.add(u):t.set(o,new Set([u]));let{parent:c}=o;for(;c;){if(r.has(c)){null==(a=r.get(c))||a.add(o);break}c=c.parent}n.has(u)||(n.add(u),null==(l=null==(s=this.options.callbacks)?void 0:s.onAdd)||l.call(s,u))};return Zr(Jr({},e),{validation:Zr(Jr({},e.validation),{get:(t,r)=>{var n;(null==r?void 0:r.track)&&i(t);const o=null==(n=e.validation)?void 0:n._getValidationForBinding(t);if(void 0===(null==o?void 0:o.displayTarget)||"field"===(null==o?void 0:o.displayTarget))return o},getChildren:t=>{var r;const n=new Array;return null==(r=a.get(o))||r.forEach((r=>{var o;const i=null==(o=e.validation)?void 0:o._getValidationForBinding(r);i&&t===i.displayTarget&&n.push(i)})),n},getValidationsForSection:()=>{var t;const r=new Array;return null==(t=l.get(o))||t.forEach((t=>{var n;const o=null==(n=e.validation)?void 0:n._getValidationForBinding(t);o&&"section"===o.displayTarget&&r.push(o)})),r},register:e=>{"section"===(null==e?void 0:e.type)&&(r.has(o)||r.set(o,new Set))},track:i})})})),e.hooks.afterNodeUpdate.tap(Qr,((n,o,u)=>{var c,p,f;if(o&&function(e,t){var r;i.has(t)?null==(r=i.get(t))||r.add(e):i.set(t,new Set([e]))}(n,o),u.updated){const e=new Set(t.get(n));null==(c=i.get(n))||c.forEach((t=>{var r;null==(r=s.get(t))||r.forEach((t=>e.add(t)))})),s.set(n,e)}else s.set(n,null!=(p=a.get(n))?p:new Set);n===e.root&&(this.trackedBindings=null!=(f=s.get(n))?f:new Set,a=s,l.clear(),r.forEach(((e,r)=>{const n=new Set;e.forEach((e=>{var r;null==(r=t.get(e))||r.forEach(n.add,n)})),l.set(r,n)})),i.clear(),t.clear(),r.clear(),s=new Map)}))}apply(e){e.hooks.resolver.tap(Qr,this.applyResolver.bind(this))}}var en=Object.defineProperty,tn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,sn=(e,t,r)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ln=(e,t)=>{for(var r in t||(t={}))on.call(t,r)&&sn(e,r,t[r]);if(nn)for(var r of nn(t))an.call(t,r)&&sn(e,r,t[r]);return e},un=(e,t)=>tn(e,rn(t));class cn{constructor(e,t,r,n){this.applicableValidations=[],this.validationsByState={load:[],change:[],navigation:[]},this.onDismiss=t,e.forEach((e=>{const{trigger:t}=e;var n;this.validationsByState[t]?this.validationsByState[t].push({value:n=e,type:n.severity,state:"none"}):null==r||r.warn(`Unknown validation trigger: ${t}`)})),this.weakBindings=null!=n?n:new Set}get(){const e=this.applicableValidations.find((e=>{const t="navigation"!==this.currentPhase||e.value.blocking;return"active"===e.state&&!1!==t}));if("active"===(null==e?void 0:e.state))return e.response}runApplicableValidations(e,t){this.applicableValidations=this.applicableValidations.map((r=>{var n,o,i;if("dismissed"===r.state)return r;const a=null!=(n=r.value.blocking)?n:"warning"===r.value.severity?"once":"error"===r.value.severity&&!0,s=t&&"once"===a;if("navigation"===this.currentPhase&&"active"===r.state&&s){if("warning"===r.value.severity){const e=r;return e.dismissable&&e.response.dismiss?e.response.dismiss():e.dismissable=!0,r}if("error"===r.value.severity){return r.state="none",r}}const l=e(r.value),u={type:r.type,value:r.value,state:l?"active":"none",dismissable:"warning"===r.value.severity&&"navigation"===this.currentPhase,response:l?un(ln({},r.value),{message:null!=(o=l.message)?o:"Something is broken",severity:r.value.severity,displayTarget:null!=(i=r.value.displayTarget)?i:"field"}):void 0};return"active"===u.state&&"warning"===r.value.severity&&(u.response.dismiss=()=>{var e;u.state="dismissed",null==(e=this.onDismiss)||e.call(this)}),u}))}update(e,t,r){"load"===e&&void 0!==this.currentPhase||("navigation"!==this.currentPhase&&e!==this.currentPhase?("load"===e?(this.currentPhase="load",this.applicableValidations=[...this.validationsByState.load]):"change"===e&&"load"===this.currentPhase?(this.currentPhase="change",this.applicableValidations=[...this.applicableValidations,...this.validationsByState.change]):"navigation"!==e||"load"!==this.currentPhase&&"change"!==this.currentPhase||(this.applicableValidations=[...this.applicableValidations,..."load"===this.currentPhase?this.validationsByState.change:[],...this.validationsByState.navigation],this.currentPhase="navigation"),this.runApplicableValidations(r,t)):this.runApplicableValidations(r,t))}}class pn{constructor(e,t){this.hooks={createValidatorRegistry:new a,onAddValidation:new l,onRemoveValidation:new l},this.validations=new Map,this.weakBindingTracker=new Set,this.lastActiveBindings=new Set,this.schema=e,this.options=t,this.providers=[e]}setOptions(e){this.options=e}getDataMiddleware(){return[new Tt((e=>{var t;if(!this.options)return;this.updateValidationsForBinding(e,"change",this.options);const r=this.getValidationForBinding(e);if("error"===(null==(t=null==r?void 0:r.get())?void 0:t.severity))return r.get();const n=new Set;return this.validations.forEach(((t,r)=>{var o;Qt(new Set([e]),t.weakBindings)&&"error"===(null==(o=null==t?void 0:t.get())?void 0:o.severity)&&(null==t||t.weakBindings.forEach((e=>{e===r?n.add({binding:e,isStrong:!0}):n.add({binding:e,isStrong:!1})})))})),n.size>0?n:void 0}),{logger:new at((()=>{var e;return null==(e=this.options)?void 0:e.logger}))})]}onView(e){if(this.validations.clear(),!this.options)return;const t=new Xr(un(ln({},this.options),{callbacks:{onAdd:t=>{if(!this.options)return;const r=this.options.model.get(t);r!==this.options.model.get(t,{ignoreDefaultValue:!0})&&this.options.model.set([[t,r]],{silent:!0}),this.updateValidationsForBinding(t,"load",this.options,(()=>{e.update(new Set([t]))}))}}}));this.tracker=t,this.providers=[this.schema,e],t.apply(e)}updateValidationsForBinding(e,t,r,n){var o;if("load"===t){const t=this.providers.reduce(((t,r)=>{var n,o;return[...t,...null!=(o=null==(n=r.getValidationsForBinding)?void 0:n.call(r,e))?o:[]]}),[]);if(0===t.length)return;this.validations.set(e,new cn(t,n,null==(o=this.options)?void 0:o.logger))}const i=this.validations.get(e);null==i||i.update(t,!0,(t=>{const n=this.validationRunner(t,r,e);if(this.weakBindingTracker.size>0){const t=this.validations.get(e);this.weakBindingTracker.forEach((e=>t.weakBindings.add(e)))}return n?{message:n.message}:void 0})),"load"!==t&&this.validations.forEach(((n,o)=>{o!==e&&Qt(new Set([e]),n.weakBindings)&&n.update(t,!0,(e=>{const t=this.validationRunner(e,r,o);return t?{message:t.message}:void 0}))}))}validationRunner(e,t,r){const n=this.getValidator(e.type),o=new Set,i={get:(e,n={includeInvalid:!0})=>(o.add(Z(e)?r:t.parseBinding(e)),t.model.get(e,n)),set:t.model.set},a=null==n?void 0:n(un(ln({},t),{evaluate:(e,r={model:i})=>t.evaluate(e,r),model:i,validation:e}),t.model.get(r,{includeInvalid:!0,formatted:"formatted"===e.dataTarget}),e);if(this.weakBindingTracker=o,a){let{message:r}=a;const{parameters:n}=a;return e.message&&(r=St(e.message,{model:i,evaluate:t.evaluate}),n&&(r=function(e,t){return e.slice().replace($r,(e=>t[e.slice(1)]||e))}(r,n))),{message:r}}}updateValidationsForView(e){const{activeBindings:t}=this,r="navigation"!==e||this.setCompare(this.lastActiveBindings,t);this.getBindings().forEach((t=>{var n;null==(n=this.validations.get(t))||n.update(e,r,(e=>{if(this.options)return this.validationRunner(e,this.options,t)}))})),"navigation"===e&&(this.lastActiveBindings=t)}setCompare(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}get activeBindings(){return new Set(Array.from(this.getBindings()).filter((e=>{var t;return void 0!==(null==(t=this.validations.get(e))?void 0:t.get())})))}getValidator(e){if(this.validatorRegistry)return this.validatorRegistry.get(e);const t=new Ut;return this.hooks.createValidatorRegistry.call(t),this.validatorRegistry=t,t.get(e)}getBindings(){var e,t;return null!=(t=null==(e=this.tracker)?void 0:e.getBindings())?t:new Set}validateView(e="navigation"){this.updateValidationsForView(e);const t=new Map;return this.getBindings().forEach((e=>{var r,n;const o=null==(r=this.getValidationForBinding(e))?void 0:r.get();o&&(null==(n=this.options)||n.logger.debug(`Validation on binding: ${e.asString()} is preventing navigation. ${JSON.stringify(o)}`),t.set(e,o))})),{canTransition:0===t.size,validations:t.size?t:void 0}}getValidationForBinding(e){return this.validations.get(e)}forView(e){return{_getValidationForBinding:t=>{var r;return null==(r=this.getValidationForBinding(Z(t)?t:e(t)))?void 0:r.get()},getAll:()=>{const e=this.getBindings();if(0===e.size)return;const t=new Map;return e.forEach((e=>{var r;const n=null==(r=this.getValidationForBinding(e))?void 0:r.get();n&&t.set(e,n)})),0===t.size?void 0:t},get(){throw new Error("Error Access be provided by the view plugin")},getChildren(){throw new Error("Error rollup should be provided by the view plugin")},getValidationsForSection(){throw new Error("Error rollup should be provided by the view plugin")},track:()=>{throw new Error("Tracking should be provided by the view plugin")},register:()=>{throw new Error("Section funcationality hould be provided by the view plugin")},type:t=>this.schema.getType(Z(t)?t:e(t))}}}class fn{constructor(e){this.updateCallback=e,this.state=new Map}removeKey(e){this.state.delete(e)}reset(){this.state.clear()}useSharedState(e){return t=>(this.state.has(e)||this.state.set(e,t),[this.state.get(e),t=>{var r;const n=this.state.get(e);this.state.set(e,t),n!==t&&(null==(r=this.updateCallback)||r.call(this))}])}getLocalStateFunction(e,t){return r=>{this.state.has(e)||this.state.set(e,[]),this.state.has(t)||this.state.set(t,0);const n=this.state.get(e),o=this.state.get(t);this.state.set(t,o+1),n.length<=o&&n.push(r);return[n[o],e=>{var t;const r=n[o];n[o]=e,r!==e&&(null==(t=this.updateCallback)||t.call(this))}]}}}function hn(e,t){return e===t||!!e.parent&&hn(e.parent,t)}class dn{constructor(e){this.registry=e,this.stateStore=new Map,this.beforeResolveSymbol=Symbol("before resolve"),this.resolveSymbol=Symbol("resolve"),this.beforeResolveCountSymbol=Symbol("before resolve count"),this.resolveCountSymbol=Symbol("resolve count")}apply(e){e.hooks.view.tap("asset-transform",(e=>{this.stateStore.clear(),e.hooks.resolver.tap("asset-transform",(t=>{let r;const n=(t,n)=>{let o;const i=n===this.resolveSymbol?this.resolveCountSymbol:this.beforeResolveCountSymbol,a=this.stateStore.get(t);return a?(o=a,o.removeKey(i)):(o=new fn((()=>{(t=>{r=t,e.update(new Set)})(t)})),this.stateStore.set(t,o)),{useSharedState:e=>o.useSharedState(e),useLocalState:e=>o.getLocalStateFunction(n,i)(e)}};t.hooks.beforeResolve.tap("asset-transform",((e,t)=>{if(e&&("asset"===e.type||"view"===e.type)){const r=this.registry.get(e.value);if(null==r?void 0:r.beforeResolve){const o=n(e,this.beforeResolveSymbol);return r.beforeResolve(e,t,o)}}return e})),t.hooks.afterUpdate.tap("asset-transform",(()=>{r=void 0})),t.hooks.skipResolve.tap("asset-transform",((e,t)=>{if(!e||!r)return e;const n=hn(r,t),o=hn(t,r);return!n&&!o})),t.hooks.afterResolve.tap("asset-transform",((e,r,o)=>{if(r.type!==Ot.Asset&&r.type!==Ot.View)return e;const i=t.getSourceNode(r);if(!i)return e;const a=this.registry.get(e);if(null==a?void 0:a.resolve){const t=n(i,this.resolveSymbol);return null==a?void 0:a.resolve(e,o,t)}return e}))}))}))}}var yn=Object.defineProperty,gn=Object.defineProperties,vn=Object.getOwnPropertyDescriptors,mn=Object.getOwnPropertySymbols,bn=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,En=(e,t,r)=>t in e?yn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Sn{constructor(e,t){this.hooks={resolveView:new l,view:new a},this.transformRegistry=new k.B,this.optimizeUpdates=!0,this.viewOptions=t,this.viewMap=e.reduce(((e,t)=>{return r=((e,t)=>{for(var r in t||(t={}))bn.call(t,r)&&En(e,r,t[r]);if(mn)for(var r of mn(t))wn.call(t,r)&&En(e,r,t[r]);return e})({},e),n={[t.id]:t},gn(r,vn(n));var r,n}),{}),new dn(this.transformRegistry).apply(this),t.flowController.hooks.flow.tap("viewController",(e=>{e.hooks.transition.tap("viewController",((e,t)=>{"VIEW"===t.value.state_type?this.onView(t.value):this.currentView=void 0}))})),t.model.hooks.onUpdate.tap("viewController",(e=>{this.currentView&&(this.optimizeUpdates?this.queueUpdate(new Set(e.map((e=>e.binding)))):this.currentView.update())}))}queueUpdate(e){var t;(null==(t=this.pendingUpdate)?void 0:t.changedBindings)?this.pendingUpdate.changedBindings=new Set([...this.pendingUpdate.changedBindings,...e]):(this.pendingUpdate={changedBindings:e},R()((()=>{var e,t;const r=null==(e=this.pendingUpdate)?void 0:e.changedBindings;this.pendingUpdate=void 0,null==(t=this.currentView)||t.update(r)})))}getViewForRef(e){if(this.viewMap[e])return this.viewMap[e];const t=Object.keys(this.viewMap).find((t=>e===wt(t,{model:this.viewOptions.model,evaluate:this.viewOptions.evaluator.evaluate})));return t&&this.viewMap[t]?this.viewMap[t]:void 0}onView(e){const t=e.ref,r=this.hooks.resolveView.call(this.getViewForRef(t),t,e);if(!r)throw new Error(`No view with id ${t}`);const n=new Tr(r,this.viewOptions);this.currentView=n,this.hooks.view.call(n),n.update()}}class On{constructor(e,t){this.hooks={resolve:new l,resolveDataStages:new l,resolveDefaultValue:new s,onDelete:new a,onSet:new a,onGet:new a,onUpdate:new a,format:new l,deformat:new l,serialize:new l},this.logger=t.logger;const r=t.middleware||[];this.baseMiddleware=[new Se(e),...r],this.trash=new Set,this.pathResolver=t.pathResolver}getModel(){if(!this.model){const e=this.hooks.resolveDataStages.call(this.baseMiddleware),t=new Ee;t.setMiddleware(e),this.model=t}return this.model}resolveDataValue(e,t,r){return r?this.hooks.deformat.call(t,e):t}set(e,t){let r=[];r=Array.isArray(e)?e.map((([e,r])=>{const n=this.pathResolver.parse(e);return[n,this.resolveDataValue(n,r,Boolean(null==t?void 0:t.formatted))]})):Object.keys(e).map((r=>{const n=this.pathResolver.parse(r),o=e[r];return[n,this.resolveDataValue(n,o,Boolean(null==t?void 0:t.formatted))]}));const n=r.reduce(((e,[t,r])=>{var n;const o=this.get(t,{includeInvalid:!0});return O(o,r)||e.push({binding:t,newValue:r,oldValue:o}),null==(n=this.logger)||n.debug(`Setting path: ${t.asString()} from: ${o} to: ${r}`),e}),[]),o=this.getModel().set(r,t),i=new Set(n.map((e=>e.binding)));return o.forEach((e=>{var t;i.has(e.binding)||!0!==e.force&&O(e.oldValue,e.newValue)||(null==(t=this.logger)||t.debug(`Path: ${e.binding.asString()} was changed from: ${e.oldValue} to: ${e.newValue}`),n.push(e))})),this.hooks.onSet.call(r),this.hooks.onSet.call(r),n.length>0&&this.hooks.onUpdate.call(n,t),o}resolve(e){return Array.isArray(e)||"string"===typeof e?this.pathResolver.parse(e):e}get(e,t){const r=e instanceof Q?e:this.resolve(e);let n=this.getModel().get(r,t);if(void 0===n&&!(null==t?void 0:t.ignoreDefaultValue)){const e=this.hooks.resolveDefaultValue.call(r);e!==n&&(n=e)}return(null==t?void 0:t.formatted)&&(n=this.hooks.format.call(n,r)),this.hooks.onGet.call(e,n),n}delete(e){if(void 0===e||null===e)throw new Error("Invalid arguments: delete expects a data path (string)");const t=this.resolve(e);this.hooks.onDelete.call(t),this.deleteData(t)}getTrash(){return this.trash}addToTrash(e){this.trash.add(e)}deleteData(e){const t=e.parent(),r=t.asString(),n=e.key(),o=Object.prototype.hasOwnProperty.call(this.get(t),n);if(void 0!==n){const e=t?this.get(t):void 0;r&&Array.isArray(e)?e.length>n&&this.set([[t,(0,w.D3)(e,n)]]):r&&e[n]?this.set([[t,(0,w.CE)(e,n)]]):r||this.getModel().reset((0,w.CE)(this.get(""),n))}o&&!this.get(e)&&this.addToTrash(e)}serialize(){return this.hooks.serialize.call(this.get(""))}}var Pn=Object.defineProperty,xn=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,kn=(e,t,r)=>t in e?Pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jn=(e,t)=>{for(var r in t||(t={}))An.call(t,r)&&kn(e,r,t[r]);if(xn)for(var r of xn(t))Rn.call(t,r)&&kn(e,r,t[r]);return e};function _n(e,t=[],r="."){return Object.keys(e).reduce(((n,o)=>jn(jn({},n),"[object Object]"===Object.prototype.toString.call(e[o])?_n(e[o],t.concat([o])):{[t.concat([o]).join(r)]:e[o]})),{})}function Cn(e){const t=_n(e),r=[];return Object.keys(t).forEach((e=>{r.push([new Q(e),t[e]])})),r}class Tn{constructor(){this.store=new Map,this.tempStore=new Map}addConstants(e,t){var r;this.store.has(t)?null==(r=this.store.get(t))||r.set(Cn(e)):this.store.set(t,new Se(e))}getConstants(e,t,r){var n,o,i,a;const s=new Q(e);return null!=(a=null!=(i=null==(n=this.tempStore.get(t))?void 0:n.get(s))?i:null==(o=this.store.get(t))?void 0:o.get(s))?a:r}setTemporaryValues(e,t){var r;this.tempStore.has(t)?null==(r=this.tempStore.get(t))||r.set(Cn(e)):this.tempStore.set(t,new Se(e))}clearTemporaryValues(){this.tempStore.forEach((e=>{e.reset()}))}}class Un{constructor(){this.name="flow-exp-plugin"}apply(e){let t;const r=e=>{e&&("object"===typeof e&&"exp"in e?null==t||t.evaluate(e.exp):null==t||t.evaluate(e))};e.hooks.expressionEvaluator.tap(this.name,(e=>{t=e})),e.hooks.flowController.tap(this.name,(e=>{e.hooks.flow.tap(this.name,(e=>{e.hooks.onStart.tap(this.name,(e=>r(e))),e.hooks.onEnd.tap(this.name,(e=>r(e))),e.hooks.resolveTransitionNode.intercept({call:e=>{(null==e?void 0:e.onStart)&&r(e.onStart)}})}))}))}}const Bn={ref:Symbol("not-started"),status:"not-started"};var In=Object.defineProperty,Nn=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,Ln=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,Fn=(e,t,r)=>t in e?In(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$n=(e,t)=>{for(var r in t||(t={}))Mn.call(t,r)&&Fn(e,r,t[r]);if(Ln)for(var r of Ln(t))Vn.call(t,r)&&Fn(e,r,t[r]);return e};const zn=class{constructor(e){var t;this.logger=new it,this.constantsController=new Tn,this.state=Bn,this.hooks={flowController:new a,viewController:new a,view:new a,expressionEvaluator:new a,dataController:new a,schema:new a,validationController:new a,bindingParser:new a,state:new a,onStart:new a,onEnd:new a,resolveFlowContent:new l};const r=[],n=new Un;r.push(n),(null==e?void 0:e.logger)&&this.logger.addHandler(e.logger),this.config=e||{},this.config.plugins=[...this.config.plugins||[],...r],null==(t=this.config.plugins)||t.forEach((e=>{e.apply(this)}))}getPlugins(){var e;return null!=(e=this.config.plugins)?e:[]}findPlugin(e){var t;return null==(t=this.config.plugins)?void 0:t.find((t=>t.symbol===e))}applyTo(e,t){const r=this.findPlugin(e);r&&t(r)}registerPlugin(e){var t;e.apply(this),null==(t=this.config.plugins)||t.push(e)}getVersion(){return zn.info.version}getCommit(){return zn.info.commit}getState(){return this.state}setState(e){this.state=e,this.hooks.state.call(e)}setupFlow(e){const t=this.hooks.resolveFlowContent.call(e),r=new Fr(t.navigation,{logger:this.logger});let n,o;this.hooks.onStart.call(t),this.hooks.flowController.call(r);const i=new de({get:e=>o.get(e),set:e=>o.set(e),evaluate:e=>n.evaluate(e)});this.hooks.bindingParser.call(i);const a=i.parse,s=x()(),l=new gt(t.schema);this.hooks.schema.call(l);const u=new pn(l);let c;function p(e){return St(e,{model:o,evaluate:n.evaluate})}var f,h;this.hooks.validationController.call(u),o=new On(t.data,{pathResolver:i,middleware:u.getDataMiddleware(),logger:this.logger}),o.hooks.format.tap("player",((e,t)=>{const r=l.getFormatter(t);return r?r.format(e):e})),o.hooks.deformat.tap("player",((e,t)=>{const r=l.getFormatter(t);return r?r.deformat(e):e})),o.hooks.resolveDefaultValue.tap("player",(e=>{var t;return null==(t=l.getApparentType(e))?void 0:t.default})),n=new nt({model:o,logger:this.logger}),this.hooks.expressionEvaluator.call(n),n.hooks.onError.tap("player",(e=>(s.reject(e),!0))),r.hooks.flow.tap("player",(e=>{e.hooks.beforeTransition.tap("player",((e,t)=>{const r=e.transitions[t]?t:"*";return e.onEnd&&e.transitions[r]&&("object"===typeof e.onEnd&&"exp"in e.onEnd?null==n||n.evaluate(e.onEnd.exp):null==n||n.evaluate(e.onEnd)),"transitions"in e&&e.transitions[r]?(0,w.tP)(e,["transitions",r],p(e.transitions[r])):e})),e.hooks.skipTransition.tap("validation",(e=>{var t;if("VIEW"===(null==e?void 0:e.value.state_type)){const{canTransition:e,validations:r}=u.validateView("navigation");if(!e&&r){const e=new Set(r.keys());return null==(t=null==c?void 0:c.currentView)||t.update(e),!0}}})),e.hooks.resolveTransitionNode.tap("player",(e=>{let t=e;return"ref"in e&&(t=(0,w.tP)(e,["ref"],p(e.ref))),"param"in e&&(t=(0,w.tP)(e,["param"],p(e.param))),t})),e.hooks.transition.tap("player",((e,t)=>{if("ACTION"===t.value.state_type){const{exp:e}=t.value;R()((()=>{try{null==r||r.transition(String(null==n?void 0:n.evaluate(e)))}catch(t){const e=this.getState();t instanceof Error&&"in-progress"===e.status&&e.fail(t)}}))}n.reset()}))})),this.hooks.dataController.call(o),u.setOptions({parseBinding:a,model:o,logger:this.logger,evaluate:n.evaluate,constants:this.constantsController}),c=new Sn(t.views||[],{evaluator:n,parseBinding:a,transition:r.transition,model:o,logger:this.logger,flowController:r,schema:l,format:(e,t)=>{const r=l.getFormatter(e);return(null==r?void 0:r.format)?r.format(t):t},formatValue:(e,t)=>{const r=l.getFormatterForType(e);return(null==r?void 0:r.format)?r.format(t):t},validation:(f=$n({},u.forView(a)),h={type:e=>l.getType(a(e))},Nn(f,Dn(h)))}),c.hooks.view.tap("player",(e=>{u.onView(e),this.hooks.view.call(e)})),this.hooks.viewController.call(c);return n.addExpressionFunction("format",((e,t,r)=>{var n,o;return null!=(o=null==(n=l.getFormatterForType({type:r}))?void 0:n.format(t))?o:t})),{start:()=>{r.start().then((e=>({endState:p(e),data:o.serialize()}))).then(s.resolve).catch((e=>{throw this.logger.error(`Something went wrong: ${e.message}`),e})).catch(s.reject).finally((()=>this.hooks.onEnd.call()))},state:{status:"in-progress",flowResult:s.promise,controllers:{data:o,view:c,flow:r,schema:l,expression:n,binding:i,validation:u},fail:s.reject,flow:t,logger:this.logger}}}start(e){return t=this,r=null,n=function*(){var t;const r=Symbol(null!=(t=null==e?void 0:e.id)?t:"payload"),n=e=>this.state.ref!==r?(this.logger.warn("Received update for a flow that's not the current one"),e):(this.setState(e),e);this.setState({status:"not-started",ref:r});try{const{state:t,start:o}=this.setupFlow(e);this.setState($n({ref:r},t)),o();const i={ref:r,status:"completed",flow:t.flow,dataModel:t.controllers.data.getModel()};return n($n($n({},yield t.flowResult),i))}catch(o){throw n({status:"error",ref:r,flow:e,error:o}),o}},new Promise(((e,o)=>{var i=e=>{try{s(n.next(e))}catch(t){o(t)}},a=e=>{try{s(n.throw(e))}catch(t){o(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,a);s((n=n.apply(t,r)).next())}));var t,r,n}};let Wn=zn;Wn.info={version:"__VERSION__",commit:"__GIT_COMMIT__"};var Hn=r(2784),qn=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{s(r.next(e))}catch(t){o(t)}},a=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}));function Yn(){let e=()=>{},t=()=>{},r="pending";const n=new Promise(((n,o)=>{e=e=>{r="success";n(e)},t=e=>{r="failure",o(e)}}));return{resolve:e,status:r,reject:t,promise:n}}const Gn=Symbol("Subscribe -- Empty Value");class Kn{constructor(){this.callbacks=new Map,this.deferredResult=Yn(),this.lastValue=Gn,this.resetDeferred=null,this.publish=this.publish.bind(this),this.add=this.add.bind(this),this.remove=this.remove.bind(this)}publish(e){return qn(this,null,(function*(){var t;yield null==(t=this.resetDeferred)?void 0:t.promise,this.lastValue=e,this.deferredResult.resolve(e),this.callbacks.forEach((t=>t(e)))}))}add(e,t){const r=this.callbacks.size;return this.callbacks.set(r,e),this.lastValue!==Gn&&!0===(null==t?void 0:t.initializeWithPreviousValue)&&e(this.lastValue),r}remove(e){this.callbacks.delete(e)}reset(e){return qn(this,null,(function*(){var t;e&&(this.resetDeferred=Yn(),yield e),this.lastValue!==Gn&&(this.deferredResult=Yn()),this.lastValue=Gn,this.callbacks.forEach((e=>e(void 0))),null==(t=this.resetDeferred)||t.resolve(),this.resetDeferred=null}))}suspend(){if(this.lastValue===Gn)throw this.deferredResult.promise;return this.lastValue}get(){if(this.lastValue!==Gn)return this.lastValue}}var Jn=r(80589);const Zn=Symbol.for("BeaconPlugin");var Qn=Object.defineProperty,Xn=Object.defineProperties,eo=Object.getOwnPropertyDescriptors,to=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable,oo=(e,t,r)=>t in e?Qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const io=class{constructor(e){this.name="Beacon",this.symbol=io.Symbol,this.beaconContext={view:void 0},this.hooks={buildBeacon:new c,cancelBeacon:new s,publishBeacon:new a},(null==e?void 0:e.plugins)&&e.plugins.forEach((e=>{e.apply(this)})),(null==e?void 0:e.callback)&&this.hooks.publishBeacon.tap("BeaconCallback",(t=>{e.callback&&e.callback(t)}))}apply(e){this.player=e,this.logger=e.logger,e.hooks.state.tap(this.name,(e=>{"in-progress"===e.status&&(this.resolveDataRefs=t=>St(t,{model:e.controllers.data,evaluate:e.controllers.expression.evaluate}))})),e.hooks.viewController.tap(this.name,(e=>{this.beaconContext={view:void 0},e.hooks.view.tap(this.name,(e=>{let t=!1;e.hooks.parser.tap(this.name,(e=>{e.hooks.onCreateASTNode.tap(this.name,(e=>{var t,r,n,o;if("asset"!==(null==e?void 0:e.type)&&"view"!==(null==e?void 0:e.type))return;const i=null!=(n=null==(r=null==(t=e.plugins)?void 0:t.stringResolver)?void 0:r.propertiesToSkip)?n:[];return i.includes("beacon")?void 0:(e.plugins=(0,w.tP)(null!=(o=e.plugins)?o:{},["stringResolver","propertiesToSkip"],["beacon",...i]),e)}))})),e.hooks.onUpdate.tap(this.name,(e=>{this.beaconContext={view:e},t||(this.beacon({action:"viewed",element:"view",asset:e,view:e}),t=!0)}))}))})),e.hooks.expressionEvaluator.tap(this.name,(e=>{e.addExpressionFunction("beacon",((e,t,r)=>{const n=this.beaconContext.view||{};this.beacon({action:t,data:r,element:"view",asset:n,view:n})}))}))}beacon(e){const{action:t,element:r,asset:n,view:o}=e,{view:i}=this.beaconContext;setTimeout((()=>{return a=this,s=null,l=function*(){var a,s,l,u,c,p;const f=(null==e?void 0:e.data)||(null==(s=null==(a=e.asset)?void 0:a.metaData)?void 0:s.beacon),h=null!=(u=null==(l=this.resolveDataRefs)?void 0:l.call(this,f))?u:f,d={action:t,element:r,data:h,assetId:null==n?void 0:n.id,viewId:null==i?void 0:i.id},y=null==(c=this.player)?void 0:c.getState(),g=(v=((e,t)=>{for(var r in t||(t={}))ro.call(t,r)&&oo(e,r,t[r]);if(to)for(var r of to(t))no.call(t,r)&&oo(e,r,t[r]);return e})({},e),m={data:h,state:y,view:null!=o?o:i,logger:this.logger},Xn(v,eo(m)));var v,m;let b=(yield this.hooks.buildBeacon.call(d,g))||d;b!==d&&this.resolveDataRefs&&(b=this.resolveDataRefs(b)),this.hooks.cancelBeacon.call(g)||(null==(p=this.logger)||p.debug("Sending beacon event",b),this.hooks.publishBeacon.call(b))},new Promise(((e,t)=>{var r=e=>{try{o(l.next(e))}catch(r){t(r)}},n=e=>{try{o(l.throw(e))}catch(r){t(r)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((l=l.apply(a,s)).next())}));var a,s,l}),0)}};let ao=io;ao.Symbol=Zn;const so=Symbol.for("MetricsCorePlugin"),lo=Symbol.for("MetricsViewBeaconPluginContext");Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var uo=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{s(r.next(e))}catch(t){o(t)}},a=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}));const co=class{constructor(e){this.symbol=co.Symbol,this.metricsPlugin=e,this.metricsPlugin.hooks.onRenderEnd.tap("MetricsViewBeaconPlugin",(e=>{e.completed&&this.resolvePendingRenderTime&&(this.resolvePendingRenderTime(e.duration),this.resolvePendingRenderTime=void 0)}))}apply(e){e.hooks.buildBeacon.intercept({context:!0,call:(e,t)=>{e&&"viewed"===t.action&&(e[this.symbol]=this.buildContext())}})}buildContext(){return uo(this,null,(function*(){return{renderTime:yield this.getRenderTime(),requestTime:this.getRequestTime()}}))}getRenderTime(){return uo(this,null,(function*(){const{flow:e}=this.metricsPlugin.getMetrics();if(e){const t=e.timeline[e.timeline.length-1];if("render"in t&&t.render.completed)return t.render.duration}return new Promise((e=>{this.resolvePendingRenderTime=e}))}))}getRequestTime(){const{flow:e}=this.metricsPlugin.getMetrics();return null==e?void 0:e.requestTime}};let po=co;po.Symbol=lo;class fo{constructor(e){this.name="RequestTimeWebPlugin",this.getRequestTime=e}apply(e){e.hooks.resolveRequestTime.tap(this.name,(()=>this.getRequestTime()))}}var ho=Object.defineProperty,yo=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,vo=Object.prototype.propertyIsEnumerable,mo=(e,t,r)=>t in e?ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const bo=Hn.createContext({}),wo=e=>{const{registry:t}=Hn.useContext(bo);let r;if("type"in e&&"id"in e?r=e:"asset"in e&&(r=e.asset),!r||"object"!==typeof r||void 0===(null==r?void 0:r.type))throw Error("Cannot determine asset type.");const n=null==t?void 0:t.get(r);if(!n)throw Error(`No implementation found for id: ${r.id} type: ${r.type}`);return Hn.createElement(n,((e,t)=>{for(var r in t||(t={}))go.call(t,r)&&mo(e,r,t[r]);if(yo)for(var r of yo(t))vo.call(t,r)&&mo(e,r,t[r]);return e})({},r))},Eo=Hn.createContext({});new class{constructor(){this.trace=ot,this.debug=ot,this.info=ot,this.warn=ot,this.error=ot}};function So(e){return{id:e.id,"data-asset-type":e.type}}var Oo=Object.defineProperty,Po=Object.getOwnPropertySymbols,xo=Object.prototype.hasOwnProperty,Ao=Object.prototype.propertyIsEnumerable,Ro=(e,t,r)=>t in e?Oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ko=({view:e})=>Hn.createElement(wo,((e,t)=>{for(var r in t||(t={}))xo.call(t,r)&&Ro(e,r,t[r]);if(Po)for(var r of Po(t))Ao.call(t,r)&&Ro(e,r,t[r]);return e})({},e));class jo{constructor(e){this.name="view-update",this.onUpdateCallback=e}apply(e){const t=e=>{this.onUpdateCallback(e)},r=e=>{e.hooks.onUpdate.tap(this.name,t)};e.hooks.view.tap(this.name,r);const n=e.getState();if("in-progress"===n.status){const{currentView:e}=n.controllers.view;if(e){r(e);const{lastUpdate:t}=e;t&&this.onUpdateCallback(t)}}}}const _o="undefined"===typeof window?void 0:window;class Co{constructor(e){var t,r;this.assetRegistry=new k.B,this.hooks={webComponent:new l,playerComponent:new l,onBeforeViewReset:new u},this.viewUpdateSubscription=new Kn,this.options=null!=e?e:{},"suspend"in this.options||(this.options.suspend=!0);const n=null==_o?void 0:_o.__PLAYER_DEVTOOLS_PLUGIN,o=new jo(this.viewUpdateSubscription.publish),i=null!=(t=null==e?void 0:e.plugins)?t:[];n&&i.push(new n);const a=i.filter((e=>Boolean(e.apply)));this.player=null!=(r=null==e?void 0:e.player)?r:new Wn({plugins:a}),i.forEach((e=>{e.applyReact&&e.applyReact(this)})),o.apply(this.player),this.Component=this.hooks.webComponent.call(this.createReactComp()),this.reactPlayerInfo={playerVersion:this.player.getVersion(),playerCommit:this.player.getCommit(),reactPlayerVersion:"__VERSION__",reactPlayerCommit:"__GIT_COMMIT__"}}getPlayerVersion(){return this.reactPlayerInfo.playerVersion}getPlayerCommit(){return this.reactPlayerInfo.playerCommit}findPlugin(e){var t;return null==(t=this.options.plugins)?void 0:t.find((t=>t.symbol===e))}registerPlugin(e){var t;e.applyReact&&(e.applyReact(this),null==(t=this.options.plugins)||t.push(e))}getReactPlayerVersion(){return this.reactPlayerInfo.reactPlayerVersion}getReactPlayerCommit(){return this.reactPlayerInfo.reactPlayerCommit}createReactComp(){const e=this.hooks.playerComponent.call(ko);return()=>{const t=function(e){const[t,r]=Hn.useState(e.get());return Hn.useEffect((()=>{const t=e.add((e=>{r(e)}),{initializeWithPreviousValue:!0});return()=>{e.remove(t)}}),[e]),t}(this.viewUpdateSubscription);return this.options.suspend&&this.viewUpdateSubscription.suspend(),Hn.createElement(Jn.ErrorBoundary,{fallbackRender:()=>null,onError:e=>{const t=this.player.getState();"in-progress"===t.status&&t.fail(e)}},Hn.createElement(Eo.Provider,{value:{player:this.player}},Hn.createElement(bo.Provider,{value:{registry:this.assetRegistry}},t&&Hn.createElement(e,{view:t}))))}}setWaitForNextViewUpdate(){const e=this.options.suspend&&this.hooks.onBeforeViewReset.isUsed();return this.viewUpdateSubscription.reset(e?this.hooks.onBeforeViewReset.call():void 0)}start(e){return this.setWaitForNextViewUpdate(),this.player.start(e).finally((()=>{return e=this,t=null,r=function*(){var e;(null==(e=this.options)?void 0:e.suspend)&&(yield this.setWaitForNextViewUpdate())},new Promise(((n,o)=>{var i=e=>{try{s(r.next(e))}catch(t){o(t)}},a=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}));var e,t,r}))}}var To=Object.defineProperty,Uo=Object.defineProperties,Bo=Object.getOwnPropertyDescriptors,Io=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable,Lo=(e,t,r)=>t in e?To(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Mo=()=>{const e=(0,Hn.useRef)({});(0,Hn.useEffect)((()=>()=>{e.current={}}),[e]);const t=(0,Hn.useCallback)((()=>{const{end:t,start:r}=e.current;if(t&&r)return t-r}),[e]);return{withRequestTime:function(t){const r="undefined"===typeof performance?Date:performance;return e.current={start:r.now()},t.finally((()=>{var t,n;e.current=(t=((e,t)=>{for(var r in t||(t={}))No.call(t,r)&&Lo(e,r,t[r]);if(Io)for(var r of Io(t))Do.call(t,r)&&Lo(e,r,t[r]);return e})({},e.current),n={end:r.now()},Uo(t,Bo(n)))}))},RequestTimeMetricsPlugin:(0,Hn.useMemo)((()=>({name:"RequestTimeMetricsPlugin",apply(e){e.applyTo(so,(e=>{new fo(t).apply(e)}))}})),[t])}};var Vo=Object.defineProperty,Fo=Object.defineProperties,$o=Object.getOwnPropertyDescriptors,zo=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,Ho=Object.prototype.propertyIsEnumerable,qo=(e,t,r)=>t in e?Vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yo=(e,t)=>{for(var r in t||(t={}))Wo.call(t,r)&&qo(e,r,t[r]);if(zo)for(var r of zo(t))Ho.call(t,r)&&qo(e,r,t[r]);return e},Go=(e,t)=>Fo(e,$o(t)),Ko=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{s(r.next(e))}catch(t){o(t)}},a=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}));function Jo(e){return e}class Zo{constructor({middleware:e}){this.middleware=e,this.callbacks=[]}addListener(e){return this.callbacks.push(e),()=>{this.callbacks=this.callbacks.filter((t=>t!==e))}}start(e){const t=Go(Yo({},e.playerConfig),{suspend:!0}),r={value:"not_started",context:{playerConfig:t,reactPlayer:new Co(t),manager:e.manager}};return this.setState(r),this}reset(){var e;if("error"!==(null==(e=this.state)?void 0:e.value))throw new Error("Flow must be in error state to reset");{const{playerConfig:e,manager:t}=this.state.context;this.start({playerConfig:e,manager:t})}}restart(){var e;if("error"!==(null==(e=this.state)?void 0:e.value))throw new Error("Flow must be in error state to restart");{const{playerConfig:e,manager:t,prevResult:r,reactPlayer:n}=this.state.context;this.setState({value:"completed",context:{playerConfig:e,manager:t,result:r,reactPlayer:n}})}}setState(e){return Ko(this,null,(function*(){this.state=e,this.callbacks.forEach((t=>{t.onState(e)}));const{manager:t,reactPlayer:r,playerConfig:n}=e.context;try{const o=yield this.processState(e,{manager:t,reactPlayer:r,playerConfig:n});o&&this.setState(o)}catch(o){this.setState({value:"error",context:{manager:t,reactPlayer:r,playerConfig:n,error:o}})}}))}processState(e,t){return Ko(this,null,(function*(){var r,n;if("not_started"===e.value||"completed"===e.value){const o="completed"===e.value?e.context.result:void 0,i=null!=(n=null==(r=this.middleware)?void 0:r.next)?n:Jo;return{value:"pending",context:Go(Yo({},t),{prevResult:o,next:i(e.context.manager.next(o))})}}if("pending"===e.value){const r=yield e.context.next;return r.done?{value:"ended",context:Go(Yo({},t),{result:e.context.prevResult})}:{value:"loaded",context:Go(Yo({},t),{prevResult:e.context.prevResult,flow:r.value})}}if("loaded"===e.value)return{value:"running",context:Go(Yo({},t),{flow:e.context.flow,prevResult:e.context.prevResult,result:e.context.reactPlayer.start(e.context.flow)})};if("running"===e.value){const r=yield e.context.result;return{value:"completed",context:Go(Yo({},t),{result:r})}}}))}}const Qo=new WeakMap,Xo=e=>{var t;const{withRequestTime:r,RequestTimeMetricsPlugin:n}=Mo(),{state:o,managedState:i}=(e=>{var t;const r=Hn.useRef({_key:Symbol("managed-player")}),n=null!=(t=Qo.get(r.current))?t:new Zo({middleware:e.middleware});Qo.set(r.current,n);const[o,i]=Hn.useState(n.state);return Hn.useEffect((()=>{const t=n.addListener({onState:e=>{i(e)}});return void 0===n.state&&n.start(e),t}),[]),{managedState:n,state:o}})({manager:e.manager,middleware:{next:r},playerConfig:{plugins:[...null!=(t=null==e?void 0:e.plugins)?t:[],n],player:e.player}});if(Hn.useEffect((()=>{var t,r,n;"ended"===(null==o?void 0:o.value)?null==(t=e.onComplete)||t.call(e,null==o?void 0:o.context.result):"error"===(null==o?void 0:o.value)?null==(r=e.onError)||r.call(e,null==o?void 0:o.context.error):"running"===(null==o?void 0:o.value)&&(null==(n=e.onStartedFlow)||n.call(e))}),[o]),Hn.useEffect((()=>()=>{var t,r;const n=null==o?void 0:o.context.reactPlayer.player.getState();"running"===(null==o?void 0:o.value)&&"in-progress"===(null==n?void 0:n.status)&&(null==(r=(t=e.manager).terminate)||r.call(t,n.controllers.data.serialize()))}),[e.manager,null==o?void 0:o.context.reactPlayer.player,null==o?void 0:o.value]),"error"===(null==o?void 0:o.value)){if(e.fallbackComponent)return Hn.createElement(e.fallbackComponent,{reset:()=>{i.reset()},retry:()=>{i.restart()},error:o.context.error});if(!e.onError)throw o.context.error}if(null==o?void 0:o.context.reactPlayer){const{Component:e}=o.context.reactPlayer;return Hn.createElement(e,null)}return null}},28892:function(e,t,r){"use strict";r.d(t,{wY:function(){return Ze}});var n=r(2784),o=r(49408);class i{constructor(e){this.name="web-asset-provider-plugin",this.entries=e}applyReact(e){this.entries.forEach((([t,r])=>{const n="string"===typeof t?{type:t}:t;e.assetRegistry.set(n,r)})),e.hooks.webComponent.tap(this.name,(t=>()=>n.createElement(o.N5.Provider,{value:{registry:e.assetRegistry}},n.createElement(t,null))))}}var a=r(19161),s=r(42840),l=r(80038),u=r(64033),c=r(26106),p=r(76808),f=r(68230);function h(...e){const[t,...r]=e.reverse();return(e,n,o)=>{const i=t(e,n,o);return r.length?r.reduce(((e,t)=>t(e,n,o)),i):i}}function d(...e){const t=[],r=[];for(const n of e)"function"===typeof n?r.push(n):((null==n?void 0:n.resolve)&&r.push(n.resolve),(null==n?void 0:n.beforeResolve)&&t.push(n.beforeResolve));return{beforeResolve:t.length?h(...t):void 0,resolve:r.length?h(...r):void 0}}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function y(e){return"object"===typeof e?e:d(e)}class g{constructor(e){this.name="asset-transform",this.registry=function(e){if(Array.isArray(e)){const t=e.map((([e,t])=>[e,y(t)]));return new f.B(t)}const t=new f.B;return e.forEach((({key:e,value:r})=>{t.set(e,y(r))})),t}(e)}apply(e){e.hooks.viewController.tap(this.name,(e=>{this.registry.forEach((({key:t,value:r})=>e.transformRegistry.set(t,y(r))))}))}}var v=Object.defineProperty,m=Object.defineProperties,b=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const P=(e,t)=>{var r,n,o,i;return o=((e,t)=>{for(var r in t||(t={}))E.call(t,r)&&O(e,r,t[r]);if(w)for(var r of w(t))S.call(t,r)&&O(e,r,t[r]);return e})({},e),i={format:r=>void 0===e.binding?r:t.data.format(e.binding,r),set(r){if(void 0!==e.binding)return t.data.model.set([[e.binding,r]],{formatted:!0})},value:void 0===e.binding?"":t.data.model.get(e.binding,{includeInvalid:!0,formatted:!0}),validation:void 0===e.binding||null==(r=t.validation)?void 0:r.get(e.binding,{track:!0}),dataType:void 0===e.binding||null==(n=t.validation)?void 0:n.type(e.binding)},m(o,b(i))};var x=Object.defineProperty,A=Object.defineProperties,R=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&C(e,r,t[r]);if(k)for(var r of k(t))_.call(t,r)&&C(e,r,t[r]);return e},U=(e,t)=>A(e,R(t));function B(e){return"Prev"===e.value}const I=d(((e,t)=>U(T({},e),{run(){var r,n;if(e.exp&&t.evaluate(e.exp),e.value){const o=null==(r=e.metaData)?void 0:r.skipValidation;null==(n=t.transition)||n.call(t,e.value,{force:o})}}})),function(...e){return{beforeResolve:h(...e)}}((e=>{var t,r,n,o,i,a;const s=null==(r=null==(t=e.plugins)?void 0:t.stringResolver)?void 0:r.propertiesToSkip;return s&&s.indexOf("exp")>1?e:U(T({},e),{plugins:U(T({},e.plugins),{stringResolver:U(T({},null==(n=null==e?void 0:e.plugins)?void 0:n.stringResolver),{propertiesToSkip:[...null!=(a=null==(i=null==(o=e.plugins)?void 0:o.stringResolver)?void 0:i.propertiesToSkip)?a:[],"exp"]})})})})));class N{constructor(){this.name="reference-assets-transforms"}apply(e){e.registerPlugin(new g([[{type:"action"},I],[{type:"input"},P]]))}}var D=Object.defineProperty,L=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&F(e,r,t[r]);if(L)for(var r of L(t))V.call(t,r)&&F(e,r,t[r]);return e};const z=n.createContext({handler:()=>{}});function W(e){const{handler:t}=n.useContext(z);return r=>{t($($({},e),null!=r?r:{}))}}function H(e){var t,r,n="";if("string"===typeof e||"number"===typeof e)n+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=H(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}var q=r(3581),Y=Object.defineProperty,G=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Q=["Delete","Backspace","Tab","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Escape"],X=(e={})=>((e,t)=>{for(var r in t||(t={}))K.call(t,r)&&Z(e,r,t[r]);if(G)for(var r of G(t))J.call(t,r)&&Z(e,r,t[r]);return e})({liveFormat:!0,suppressBeacons:!1,quickFormatDelay:200,slowFormatDelay:1e3,slowFormatKeys:Q,decimalSymbol:".",prefix:"",suffix:""},e),ee=(e,t)=>{var r;const[o,i]=n.useState(null!=(r=e.value)?r:""),a=n.useRef(void 0),s=(e=>{const t=W({element:"text_input",asset:e});return r=>{let n="modified";r!==e.value&&(r&&!e.value?n="added":!r&&e.value&&(n="deleted"),t({action:n}))}})(e),{liveFormat:l,suppressBeacons:u,quickFormatDelay:c,slowFormatDelay:p,slowFormatKeys:f,decimalSymbol:h,prefix:d,suffix:y}=X(t);function g(){a.current&&(clearTimeout(a.current),a.current=void 0)}function v(e){return e?`${d}${e}${y}`:""}const m=e.value;return n.useEffect((()=>{i(v(m))}),[m]),n.useEffect((()=>g),[]),{onBlur:t=>{var r;g();const n=null!=(r=d?t.target.value.replace(d,""):e.format(t.target.value))?r:"";n?(e.set(n),i(v(n))):(e.set(""),i("")),u||s(n)},onChange:e=>{i(e.target.value)},onKeyDown:t=>{g(),d&&function(e){const t=e.target,r=t.selectionStart,n=t.selectionEnd,o=d.length,i=r===o,a=n===o;r&&n&&r<o?(e.preventDefault(),t.setSelectionRange(o,n-r+o)):("ArrowLeft"===e.key&&i||"Backspace"===e.key&&i&&a||"Home"===e.key)&&(e.preventDefault(),t.setSelectionRange(d.length,d.length))}(t);const r=t.target;l&&(a.current=setTimeout((()=>{var t,n;const o=r.selectionStart,a=r.value;if(o!==a.length)return;const s=(t=>{var r;const n=t.indexOf(h),o=null!=(r=e.format(t))?r:"",i=o.indexOf(h);return(-1===n||0===n)&&i>0?{newValue:o.includes(d)?`${o}`:`${d}${o}`,newCursorPosition:o.includes(d)?i:i+d.length}:{newValue:o.includes(d)?`${o}`:`${d}${o}`}})(a);i(s.newValue),r.selectionStart=null!=(t=s.newCursorPosition)?t:r.selectionStart,r.selectionEnd=null!=(n=s.newCursorPosition)?n:r.selectionEnd}),function(e){const t=f.every((e=>"number"===typeof e))?e.which:e.key;return f.includes(t)?p:c}(t)))},onFocus:e=>{const t=e.target,r=""===t.value;(!r&&y||r&&d)&&i(function(e){let t=e.value;return y&&(t=t.substring(0,t.indexOf(y))),d&&!t.includes(d)&&(t=`${d}${t}`),t}(t))},value:o}};var te=Object.defineProperty,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ie=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&ie(e,r,t[r]);if(re)for(var r of re(t))oe.call(t,r)&&ie(e,r,t[r]);return e};const se=e=>{const{validation:t,label:r,id:i,note:a}=e,u=ee(e);return n.createElement(s.NI,{isInvalid:Boolean(t)},r&&n.createElement(s.lX,{htmlFor:i},n.createElement(o.qr,ae({},r))),n.createElement(l.II,ae({id:i,size:"md"},u)),t&&n.createElement(s.J1,null,t.message),a&&n.createElement(s.Q6,null,n.createElement(o.qr,ae({},a))))};var le=Object.defineProperty,ue=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ye=n.createContext(void 0),ge=e=>{let t;const r=(0,n.useContext)(ye);return e.modifiers&&(null==r?void 0:r.getClassForModifier)&&(t=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=H(e))&&(n&&(n+=" "),n+=t);return n}(...e.modifiers.map(r.getClassForModifier))),i=((e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&de(e,r,t[r]);if(pe)for(var r of pe(t))he.call(t,r)&&de(e,r,t[r]);return e})({},(0,o.nm)(e)),a={className:t,children:e.value},ue(i,ce(a));var i,a};var ve=Object.defineProperty,me=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ee=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Se=e=>{const t=ge(e),r=(e=>{var t;return null==(t=e.modifiers)?void 0:t.find((e=>{var t;return"link"===e.type&&void 0!==(null==(t=e.metaData)?void 0:t.ref)}))})(e),{value:o}=e;return r?n.createElement(u.rU,{href:r.metaData.ref},o):n.createElement("span",((e,t)=>{for(var r in t||(t={}))be.call(t,r)&&Ee(e,r,t[r]);if(me)for(var r of me(t))we.call(t,r)&&Ee(e,r,t[r]);return e})({},t),o)};var Oe=Object.defineProperty,Pe=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Re=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ke=(e,t)=>{for(var r in t||(t={}))xe.call(t,r)&&Re(e,r,t[r]);if(Pe)for(var r of Pe(t))Ae.call(t,r)&&Re(e,r,t[r]);return e};const je=e=>{var t;return n.createElement(u.kC,{direction:"column",gap:"5"},e.label&&n.createElement("h3",null,n.createElement(o.qr,ke({},e.label))),null==(t=e.values)?void 0:t.map((e=>n.createElement(o.qr,ke({key:e.asset.id},e)))))};var _e=Object.defineProperty,Ce=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Be=(e,t,r)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ie=(e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&Be(e,r,t[r]);if(Ce)for(var r of Ce(t))Ue.call(t,r)&&Be(e,r,t[r]);return e};var Ne=Object.defineProperty,De=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Ve=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fe=(e,t)=>{for(var r in t||(t={}))Le.call(t,r)&&Ve(e,r,t[r]);if(De)for(var r of De(t))Me.call(t,r)&&Ve(e,r,t[r]);return e};const $e=e=>{const{label:t}=e,r=(e=>{const{label:t}=e,r=W({asset:e,action:"clicked",element:"button"});return{id:e.id,onClick:()=>{r(),e.run()},children:(null==t?void 0:t.asset)?n.createElement(o.qr,Ie({},null==t?void 0:t.asset)):null}})(e);return n.createElement("div",null,n.createElement(c.zx,Fe({variant:B(e)?"ghost":"solid"},r),B(e)&&n.createElement(q.wy,null),t&&n.createElement(u.xv,null,n.createElement(o.qr,Fe({},t)))))};var ze=Object.defineProperty,We=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,Ye=(e,t,r)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ge=(e,t)=>{for(var r in t||(t={}))He.call(t,r)&&Ye(e,r,t[r]);if(We)for(var r of We(t))qe.call(t,r)&&Ye(e,r,t[r]);return e};const Ke=e=>{var t,r;const i=n.useMemo((()=>{var t,r;if(null==(t=e.actions)?void 0:t.length)return null==(r=e.actions)?void 0:r.reduce(((e,t)=>(e[B(t.asset)?"prev":"next"].push(t),e)),{prev:[],next:[]})}),[e.actions]);return n.createElement(u.xu,{minW:{base:void 0,md:"md"}},n.createElement(u.Kq,{gap:"10"},e.title&&n.createElement(u.X6,{size:"lg",as:"h1"},n.createElement(o.qr,Ge({},e.title))),e.subTitle&&n.createElement(u.X6,{size:"md",as:"h3"},n.createElement(o.qr,Ge({},e.subTitle))),n.createElement(u.xu,null,e.primaryInfo&&n.createElement(o.qr,Ge({},e.primaryInfo))),n.createElement(u.Kq,{gap:"4"},i&&n.createElement(u.iz,null),n.createElement(u.Ug,{justifyContent:"space-between"},n.createElement(c.hE,{spacing:"6"},null==(t=null==i?void 0:i.prev)?void 0:t.map((e=>n.createElement(o.qr,Ge({key:e.asset.id},e))))),n.createElement(c.hE,{spacing:"6"},null==(r=null==i?void 0:i.next)?void 0:r.map((e=>n.createElement(o.qr,Ge({key:e.asset.id},e)))))))))},Je=e=>(0,p.Fg)()?n.createElement(n.Fragment,null,e.children):n.createElement(a.xjn,null,e.children);class Ze{constructor(){this.name="reference-assets-web-plugin"}applyReact(e){e.registerPlugin(new i([["input",se],["text",Se],["action",$e],["info",Ke],["collection",je]])),e.hooks.webComponent.tap(this.name,(e=>()=>n.createElement(Je,null,n.createElement(e,null))))}apply(e){e.registerPlugin(new N)}}},99488:function(e){"use strict";function t(e,r){for(var n,o=0,i=e.length;o<i;o++)n=e[o],Array.isArray(n)?t(n,r):r.push(n);return r}e.exports=function(e){return t(e,[])}},95766:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=l(e),a=i[0],s=i[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,p=s>0?a-4:a;for(r=0;r<p;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t);1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,l=n-o;s<l;s+=a)i.push(u(e,s,s+a>l?l:s+a));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],n=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=i.length;a<s;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},48834:function(e,t,r){"use strict";var n=r(95766),o=r(62333),i=r(77906);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t);return e}(e,t,r,n):"string"===typeof t?function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),o=(e=s(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|h(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(n=t.length)!==n?s(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|h(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function d(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"===typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,o);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,o){var i,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var c=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){for(var p=!0,f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){p=!1;break}if(p)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function w(e,t,r,n){return z(F(t,e.length-r),e,r,n)}function E(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return E(e,t,r,n)}function O(e,t,r,n){return z($(t),e,r,n)}function P(e,t,r,n){return z(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,l,u=e[o],c=null,p=u>239?4:u>223?3:u>191?2:1;if(o+p<=r)switch(p){case 1:u<128&&(c=u);break;case 2:128===(192&(i=e[o+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[o+1],a=e[o+2],128===(192&i)&&128===(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128===(192&i)&&128===(192&a)&&128===(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=p}return function(e){var t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=R));return r}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?s(e,t):void 0!==r?"string"===typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return p(null,e)},l.allocUnsafeSlow=function(e){return p(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,o){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(n,o),c=e.slice(t,r),p=0;p<s;++p)if(u[p]!==c[p]){i=u[p],a=c[p];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function k(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function _(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=V(e[i]);return o}function C(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function T(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function N(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,i){return i||N(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,i){return i||N(e,0,r,8),o.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var o=t-e;r=new l(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||U(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||U(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);U(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);U(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},l.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=l.isBuffer(e)?e:F(new l(e,n).toString()),s=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function $(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(M,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function z(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}},62680:function(e,t,r){"use strict";var n=r(67286),o=r(89429),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"===typeof r&&i(e,".prototype.")>-1?o(r):r}},89429:function(e,t,r){"use strict";var n=r(4090),o=r(67286),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),l=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(f){u=null}e.exports=function(e){var t=s(n,a,arguments);if(l&&u){var r=l(t,"length");r.configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var p=function(){return s(n,i,arguments)};u?u(e.exports,"apply",{value:p}):e.exports.apply=p},27843:function(e){e.exports=function(e,t,r,n,o){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:o;return e===o?r:e}},54873:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(78294),o=r(73961);var i;!function(e){function t(e){let r=n.findChildrenByType(e,"term").map((e=>n.findChildrenByType(e,"literal").concat(n.findChildrenByType(e,"rule-name"))[0].text));return n.findChildrenByType(e,"list").forEach((e=>{r=r.concat(t(e))})),r}function r(r,o=e.defaultParser){let i=o.getAST(r);if(!i)throw new Error("Could not parse "+r);if(i.errors&&i.errors.length)throw i.errors[0];let a=n.findChildrenByType(i,"rule").map((e=>{let r=n.findChildrenByType(e,"rule-name")[0].text,o=n.findChildrenByType(e,"firstExpression").concat(n.findChildrenByType(e,"otherExpression")),i=[];return o.forEach((e=>{i.push(t(e))})),{name:r,bnf:i}}));return a.some((e=>"EOL"==e.name))||a.push({name:"EOL",bnf:[['"\\r\\n"','"\\r"','"\\n"']]}),a}e.RULES=[{name:"syntax",bnf:[["RULE_EOL*","rule+"]]},{name:"rule",bnf:[['" "*','"<"',"rule-name",'">"','" "*','"::="',"firstExpression","otherExpression*",'" "*',"RULE_EOL+",'" "*']]},{name:"firstExpression",bnf:[['" "*',"list"]]},{name:"otherExpression",bnf:[['" "*','"|"','" "*',"list"]]},{name:"RULE_EOL",bnf:[['"\\r"'],['"\\n"']]},{name:"list",bnf:[["term",'" "*',"list"],["term"]]},{name:"term",bnf:[["literal"],['"<"',"rule-name",'">"']]},{name:"literal",bnf:[["'\"'","RULE_CHARACTER1*","'\"'"],['"\'"',"RULE_CHARACTER2*",'"\'"']]},{name:"RULE_CHARACTER",bnf:[['" "'],["RULE_LETTER"],["RULE_DIGIT"],["RULE_SYMBOL"]]},{name:"RULE_LETTER",bnf:[['"A"'],['"B"'],['"C"'],['"D"'],['"E"'],['"F"'],['"G"'],['"H"'],['"I"'],['"J"'],['"K"'],['"L"'],['"M"'],['"N"'],['"O"'],['"P"'],['"Q"'],['"R"'],['"S"'],['"T"'],['"U"'],['"V"'],['"W"'],['"X"'],['"Y"'],['"Z"'],['"a"'],['"b"'],['"c"'],['"d"'],['"e"'],['"f"'],['"g"'],['"h"'],['"i"'],['"j"'],['"k"'],['"l"'],['"m"'],['"n"'],['"o"'],['"p"'],['"q"'],['"r"'],['"s"'],['"t"'],['"u"'],['"v"'],['"w"'],['"x"'],['"y"'],['"z"']]},{name:"RULE_DIGIT",bnf:[['"0"'],['"1"'],['"2"'],['"3"'],['"4"'],['"5"'],['"6"'],['"7"'],['"8"'],['"9"']]},{name:"RULE_SYMBOL",bnf:[['"-"'],['"_"'],['"!"'],['"#"'],['"$"'],['"%"'],['"&"'],['"("'],['")"'],['"*"'],['"+"'],['","'],['"-"'],['"."'],['"/"'],['":"'],['";"'],['"<"'],['"="'],['">"'],['"?"'],['"@"'],['"["'],['"\\"'],['"]"'],['"^"'],['"_"'],['"`"'],['"{"'],['"|"'],['"}"'],['"~"']]},{name:"RULE_CHARACTER1",bnf:[["RULE_CHARACTER"],['"\'"']]},{name:"RULE_CHARACTER2",bnf:[["RULE_CHARACTER"],["'\"'"]]},{name:"rule-name",bnf:[["RULE_LETTER","RULE_CHAR*"]]},{name:"RULE_CHAR",bnf:[["RULE_LETTER"],["RULE_DIGIT"],['"_"'],['"-"']]}],e.defaultParser=new o.Parser(e.RULES,{debug:!1}),e.getRules=r,e.Transform=function(t,n=e.defaultParser){return r(t.join(""),n)};class i extends o.Parser{constructor(t,n){super(r(t,n&&!0===n.debugRulesParser?new o.Parser(e.RULES,{debug:!0}):e.defaultParser),n),this.source=t}emitSource(){return this.source}}e.Parser=i}(i||(i={})),t.default=i},9089:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80707),o=r(73961);var i;!function(e){e.RULES=[{name:"Grammar",bnf:[["RULE_S*","Attributes?","RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","%Choice","RULE_WHITESPACE*","Attributes?","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Attributes",bnf:[['"{"',"Attribute","%Attributes*","RULE_S*",'"}"']]},{name:"%Attributes",bnf:[["RULE_S*",'","',"Attribute"]],fragment:!0},{name:"Attribute",bnf:[["RULE_S*","NCName","RULE_WHITESPACE*",'"="',"RULE_WHITESPACE*","AttributeValue"]]},{name:"AttributeValue",bnf:[["NCName"],[/[1-9][0-9]*/]]},{name:"%Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_S*",'"|"',"RULE_S*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["%Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","%Item"],["%Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"%Item",bnf:[["RULE_WHITESPACE*","PrimaryPreDecoration?","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"PrimaryPreDecoration",bnf:[['"&"'],['"!"'],['"~"']]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_S*","%Choice","RULE_S*",'")"']]},{name:"StringLiteral",bnf:[["'\"'",/[^"]*/,"'\"'"],['"\'"',/[^']*/,'"\'"']]},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[[/[^*]/],['"*"+',/[^/]*/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],e.defaultParser=new o.Parser(e.RULES,{debug:!1});const t=/^(!|&)/,r=/(\?|\+|\*)$/,i=/^%/;function a(e,n){if("string"==typeof e){let a=r.exec(e),l=t.exec(e),u=l?l[0]:"",c=a?a[0]+" ":"";if(i.test(e)){return function(e,t){let r=o.findRuleByName(e,t);return r&&1==r.bnf.length&&1==r.bnf[0].length&&(r.bnf[0][0]instanceof RegExp||'"'==r.bnf[0][0][0]||"'"==r.bnf[0][0][0])}(e,n)?u+s(e,n)+c:u+"("+s(e,n)+")"+c}return e.replace(t,u)}return e.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function s(e,t){let r=o.findRuleByName(e,t);return r?r.bnf.map((e=>function(e,t){return e.map((e=>a(e,t))).join(" ")}(e,t))).join(" | "):"RULE_NOT_FOUND {"+e+"}"}function l(e){let t=[];return e.grammarRules.forEach((r=>{if(!/^%/.test(r.name)){let n=r.recover?" { recoverUntil="+r.recover+" }":"";t.push(r.name+" ::= "+s(r.name,e)+n)}})),t.join("\n")}e.emit=l;let u=0;function c(e){return new RegExp(e.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function p(e,t,r,n){let i=null,a=[];return t.children.forEach(((s,l)=>{"Minus"==s.type&&function(e,t){throw console.log("reberia restar "+t+" a "+e),new Error("Difference not supported yet")}(i,s);let p=t.children[l+1];p=p&&"PrimaryDecoration"==p.type&&p.text||"";let h="";i&&"PrimaryPreDecoration"==i.type&&(h=i.text);let d="~"==h?1:void 0;switch(d&&(h=""),s.type){case"SubItem":let t="%"+(r+u++);f(e,s,t,n),a.push(h+t+p);break;case"NCName":a.push(h+s.text+p);break;case"StringLiteral":if(p||h||!/^['"/()a-zA-Z0-9&_.:=,+*\-\^\\]+$/.test(s.text))a.push(h+s.text+p);else for(const e of s.text.slice(1,-1))n&&"true"==n.ignoreCase&&/[a-zA-Z]/.test(e)?a.push(new RegExp("["+e.toUpperCase()+e.toLowerCase()+"]")):a.push(new RegExp(o.escapeRegExp(e)));break;case"CharCode":case"CharClass":if(p||h){let t={name:"%"+(r+u++),bnf:[[c(s.text)]],pinned:d};e.push(t),a.push(h+t.name+p)}else a.push(c(s.text));break;case"PrimaryPreDecoration":case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+s.type+" -> "+JSON.stringify(s.text))}i=s})),a}function f(e,t,r,o){let i=t.children.filter((e=>"Attributes"==e.type))[0],a={};i&&i.children.forEach((e=>{let t=e.children.filter((e=>"NCName"==e.type))[0].text;if(t in a)throw new n.TokenError("Duplicated attribute "+t,e);a[t]=e.children.filter((e=>"AttributeValue"==e.type))[0].text}));let s=t.children.filter((e=>"SequenceOrDifference"==e.type)).map((t=>p(e,t,r,o||a))),l={name:r,bnf:s};if(0==r.indexOf("%")&&(l.fragment=!0),a.recoverUntil&&(l.recover=a.recoverUntil,l.bnf.length>1))throw new n.TokenError("only one-option productions are suitable for error recovering",t);if("pin"in a){let e=parseInt(a.pin);if(isNaN(e)||(l.pinned=e),l.bnf.length>1)throw new n.TokenError("only one-option productions are suitable for pinning",t)}l.implicitWs="ws"in a?"explicit"!=a.ws:null,l.fragment=l.fragment||"true"==a.fragment,l.simplifyWhenOneChildren="true"==a.simplifyWhenOneChildren,e.push(l)}function h(t,r=e.defaultParser){let o=r.getAST(t);if(!o)throw new Error("Could not parse "+t);if(o.errors&&o.errors.length)throw o.errors[0];let i=null,a=o.children.filter((e=>"Attributes"==e.type))[0],s={};a&&a.children.forEach((e=>{let t=e.children.filter((e=>"NCName"==e.type))[0].text;if(t in s)throw new n.TokenError("Duplicated attribute "+t,e);s[t]=e.children.filter((e=>"AttributeValue"==e.type))[0].text})),i="implicit"==s.ws;let l=[];return o.children.filter((e=>"Production"==e.type)).map((e=>{let t=e.children.filter((e=>"NCName"==e.type))[0].text;f(l,e,t)})),l.forEach((e=>{null===e.implicitWs&&(e.implicitWs=i)})),l}e.getRules=h,e.Transform=function(t,r=e.defaultParser){return h(t.join(""),r)};class d extends o.Parser{constructor(t,r){super(h(t,r&&!0===r.debugRulesParser?new o.Parser(e.RULES,{debug:!0}):e.defaultParser),r)}emitSource(){return l(this)}}e.Parser=d}(i||(i={})),t.default=i},44091:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(73961);var o;!function(e){e.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[["'\"'",/[^"]*/,"'\"'"],['"\'"',/[^']*/,'"\'"']],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],e.defaultParser=new n.Parser(e.RULES,{debug:!1});const t=/^(!|&)/,r=/(\?|\+|\*)$/,o=/^%/;function i(e,i){if("string"==typeof e){if(t.test(e))return"";if(o.test(e)){let t=r.exec(e),o=t?t[0]+" ":"";return function(e,t){let r=n.findRuleByName(e,t);return r&&1==r.bnf.length&&1==r.bnf[0].length&&(r.bnf[0][0]instanceof RegExp||'"'==r.bnf[0][0][0]||"'"==r.bnf[0][0][0])}(e,i)?a(e,i)+o:"("+a(e,i)+")"+o}return e}return e.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function a(e,t){let r=n.findRuleByName(e,t);return r?r.bnf.map((e=>function(e,t){return e.map((e=>i(e,t))).join(" ")}(e,t))).join(" | "):"RULE_NOT_FOUND {"+e+"}"}function s(e){let t=[];return e.grammarRules.forEach((r=>{if(!/^%/.test(r.name)){let n=r.recover?" /* { recoverUntil="+r.recover+" } */":"";t.push(r.name+" ::= "+a(r.name,e)+n)}})),t.join("\n")}e.emit=s;let l=0;function u(e){return new RegExp(e.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function c(e,t,r){let n=null,o=[];return t.children.forEach(((i,a)=>{"Minus"==i.type&&function(e,t){throw console.log("reberia restar "+t+" a "+e),new Error("Difference not supported yet")}(n,i);let s=t.children[a+1];s=s&&"PrimaryDecoration"==s.type&&s.text||"";switch(i.type){case"SubItem":let t="%"+(r+l++);p(e,i,t),o.push(""+t+s);break;case"NCName":case"StringLiteral":o.push(""+i.text+s);break;case"CharCode":case"CharClass":if(s){let t={name:"%"+(r+l++),bnf:[[u(i.text)]]};e.push(t),o.push(""+t.name+s)}else o.push(u(i.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+i.type+" -> "+JSON.stringify(i.text))}n=i})),o}function p(e,t,r){let n=t.children.filter((e=>"SequenceOrDifference"==e.type)).map((t=>c(e,t,r))),o={name:r,bnf:n},i=null;n.forEach((e=>{i=i||e.recover,delete e.recover})),0==r.indexOf("%")&&(o.fragment=!0),i&&(o.recover=i),e.push(o)}function f(t,r=e.defaultParser){let n=r.getAST(t);if(!n)throw new Error("Could not parse "+t);if(n.errors&&n.errors.length)throw n.errors[0];let o=[];return n.children.filter((e=>"Production"==e.type)).map((e=>{let t=e.children.filter((e=>"NCName"==e.type))[0].text;p(o,e,t)})),o}e.getRules=f,e.Transform=function(t,r=e.defaultParser){return f(t.join(""),r)};class h extends n.Parser{constructor(t,r){super(f(t,r&&!0===r.debugRulesParser?new n.Parser(e.RULES,{debug:!0}):e.defaultParser),r)}emitSource(){return s(this)}}e.Parser=h}(o||(o={})),t.default=o},52360:function(e,t,r){"use strict";var n=r(54873);var o=r(44091);Object.defineProperty(t,"W3C",{enumerable:!0,get:function(){return o.default}});var i=r(9089)},73961:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Parser=exports.findRuleByName=exports.parseRuleName=exports.escapeRegExp=exports.readToken=void 0;const UPPER_SNAKE_RE=/^[A-Z0-9_]+$/,decorationRE=/(\?|\+|\*)$/,preDecorationRE=/^(@|&|!)/,WS_RULE="WS",TokenError_1=__webpack_require__(80707);function readToken(e,t){let r=t.exec(e);return r&&0==r.index?0==r[0].length&&t.source.length>0?null:{type:null,text:r[0],rest:e.substr(r[0].length),start:0,end:r[0].length-1,fullText:r[0],errors:[],children:[],parent:null}:null}function escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function fixRest(e){e.rest="",e.children&&e.children.forEach((e=>fixRest(e)))}function fixPositions(e,t){e.start+=t,e.end+=t,e.children&&e.children.forEach((t=>fixPositions(t,e.start)))}function agregateErrors(e,t){t.errors&&t.errors.length&&t.errors.forEach((t=>e.push(t))),t.children&&t.children.forEach((t=>agregateErrors(e,t)))}function parseRuleName(e){let t=decorationRE.exec(e),r=preDecorationRE.exec(e),n=t&&t[0]||"",o=r&&r[0]||"",i={raw:e,name:e.replace(decorationRE,"").replace(preDecorationRE,""),isOptional:"?"==n||"*"==n,allowRepetition:"+"==n||"*"==n,atLeastOne:"+"==n,lookupPositive:"&"==o,lookupNegative:"!"==o,pinned:"@"==o,lookup:!1,isLiteral:!1};return i.isLiteral="'"==i.name[0]||'"'==i.name[0],i.lookup=i.lookupNegative||i.lookupPositive,i}function findRuleByName(e,t){let r=parseRuleName(e);return t.cachedRules[r.name]||null}function stripRules(e,t){if(e.children){let r=e.children.filter((e=>e.type&&t.test(e.type)));for(let t=0;t<r.length;t++){let n=e.children.indexOf(r[t]);-1!=n&&e.children.splice(n,1)}e.children.forEach((e=>stripRules(e,t)))}}exports.readToken=readToken,exports.escapeRegExp=escapeRegExp,exports.parseRuleName=parseRuleName,exports.findRuleByName=findRuleByName;const ignoreMissingRules=["EOF"];class Parser{constructor(e,t){this.grammarRules=e,this.options=t,this.cachedRules={},this.debug=!!t&&!0===t.debug;let r=[],n=[];if(e.forEach((e=>{let t=parseRuleName(e.name);if(t.name in this.cachedRules)r.push("Duplicated rule "+t.name);else{if(this.cachedRules[t.name]=e,e.bnf&&e.bnf.length)e.bnf.forEach((t=>{if("string"===typeof t[0]){if(parseRuleName(t[0]).name==e.name){let t="Left recursion is not allowed, rule: "+e.name;-1==r.indexOf(t)&&r.push(t)}}t.forEach((e=>{if("string"==typeof e){let t=parseRuleName(e);t.isLiteral||-1!=n.indexOf(t.name)||-1!=ignoreMissingRules.indexOf(t.name)||n.push(t.name)}}))}));else{let t="Missing rule content, rule: "+e.name;-1==r.indexOf(t)&&r.push(t)}WS_RULE==e.name&&(e.implicitWs=!1),e.implicitWs&&-1==n.indexOf(WS_RULE)&&n.push(WS_RULE),e.recover&&-1==n.indexOf(e.recover)&&n.push(e.recover)}})),n.forEach((e=>{e in this.cachedRules||r.push("Missing rule "+e)})),r.length)throw new Error(r.join("\n"))}getAST(e,t){t||(t=this.grammarRules.filter((e=>!e.fragment&&0!=e.name.indexOf("%")))[0].name);let r=this.parse(e,t);if(r){agregateErrors(r.errors,r),fixPositions(r,0),stripRules(r,/^%/),this.options&&this.options.keepUpperRules||stripRules(r,UPPER_SNAKE_RE);let e=r.rest;e&&new TokenError_1.TokenError("Unexpected end of input: \n"+e,r),fixRest(r),r.rest=e}return r}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(txt,target,recursion=0){let out=null,type=parseRuleName(target),expr,printable=this.debug&&!UPPER_SNAKE_RE.test(type.name);printable&&console.log(new Array(recursion).join("\u2502  ")+"Trying to get "+target+" from "+JSON.stringify(txt.split("\n")[0]));let realType=type.name,targetLex=findRuleByName(type.name,this);if("EOF"==type.name){if(txt.length)return null;if(0==txt.length)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!targetLex&&type.isLiteral){let src=eval(type.name);if(""===src)return{type:"%%EMPTY%%",text:"",rest:txt,start:0,end:0,fullText:"",errors:[],children:[],parent:null};expr=new RegExp(escapeRegExp(src)),realType=null}}catch(e){return e instanceof ReferenceError&&console.error(e),null}if(expr){let e=readToken(txt,expr);if(e)return e.type=realType,e}else{let e=targetLex.bnf;e instanceof Array&&e.forEach((e=>{if(out)return;let t=null,r={type:type.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:txt};targetLex.fragment&&(r.fragment=!0);let n=txt,o=0,i=e.length>0,a=!1;for(let s=0;s<e.length;s++)if("string"==typeof e[s]){let l,u=parseRuleName(e[s]);i=i&&u.isOptional;let c=!1;do{if(l=null,targetLex.implicitWs&&(l=this.parse(n,u.name,recursion+1),!l)){let e;do{if(e=this.parse(n,WS_RULE,recursion+1),!e)break;r.text=r.text+e.text,r.end=r.text.length,e.parent=r,r.children.push(e),n=n.substr(e.text.length),o+=e.text.length}while(e&&e.text.length)}if(l=l||this.parse(n,u.name,recursion+1),u.lookupNegative){if(l)return;break}if(u.lookupPositive&&!l)return;if(!l){if(u.isOptional)break;if(u.atLeastOne&&c)break}if(l&&targetLex.pinned==s+1&&(t=l,printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+l.type+" PINNED")),l||(l=this.parseRecovery(targetLex,n,recursion+1)),!l){if(!t)return;out=r,l={type:"SyntaxError",text:n,children:[],end:n.length,errors:[],fullText:"",parent:null,start:0,rest:""},n.length?new TokenError_1.TokenError(`Unexpected end of input. Expecting ${u.name} Got: ${n}`,l):new TokenError_1.TokenError(`Unexpected end of input. Missing ${u.name}`,l),printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+l.type+" "+JSON.stringify(l.text))}if(c=!0,a=!0,"%%EMPTY%%"==l.type)break;l.start+=o,l.end+=o,!u.lookupPositive&&l.type&&(l.fragment?l.children&&l.children.forEach((e=>{e.start+=o,e.end+=o,e.parent=r,r.children.push(e)})):(l.parent=r,r.children.push(l))),u.lookup&&(l.lookup=!0),printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+l.type+" "+JSON.stringify(l.text)),u.lookup||l.lookup||(r.text=r.text+l.text,r.end=r.text.length,n=n.substr(l.text.length),o+=l.text.length),r.rest=n}while(l&&u.allowRepetition&&n.length&&!l.lookup)}else{let t=readToken(n,e[s]);if(!t)return;printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514> "+JSON.stringify(t.text)+e[s].source),a=!0,t.start+=o,t.end+=o,r.text=r.text+t.text,r.end=r.text.length,n=n.substr(t.text.length),o+=t.text.length,r.rest=n}a&&(out=r,printable&&console.log(new Array(recursion).join("\u2502  ")+"\u251c<\u2500\u2534< PUSHING "+out.type+" "+JSON.stringify(out.text)))})),out&&targetLex.simplifyWhenOneChildren&&1==out.children.length&&(out=out.children[0])}return out||printable&&console.log(target+" NOT RESOLVED FROM "+txt),out}parseRecovery(e,t,r){if(e.recover&&t.length){let n=this.debug;n&&console.log(new Array(r+1).join("\u2502  ")+"Trying to recover until token "+e.recover+" from "+JSON.stringify(t.split("\n")[0]+t.split("\n")[1]));let o,i={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""};do{if(o=this.parse(t,e.recover,r+1),o){new TokenError_1.TokenError('Unexpected input: "'+i.text+`" Expecting: ${e.name}`,i);break}i.text=i.text+t[0],i.end=i.text.length,t=t.substr(1)}while(!o&&t.length>0);if(i.text.length>0&&o)return n&&console.log(new Array(r+1).join("\u2502  ")+"Recovered text: "+JSON.stringify(i.text)),i}return null}}exports.Parser=Parser,exports.default=Parser},78294:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findChildrenByType=void 0,t.findChildrenByType=function(e,t){return e.children?e.children.filter((e=>e.type==t)):[]}},80707:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenError=void 0;class r extends Error{constructor(e,t){if(super(e),this.message=e,this.token=t,!t||!t.errors)throw this;t.errors.push(this)}inspect(){return"SyntaxError: "+this.message}}t.TokenError=r},75944:function(e,t,r){"use strict";var n=r(73961);var o=r(80707);t.Grammars=r(52360)},46388:function(e){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,n,o){if("[object Function]"!==r.call(n))throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var a=0;a<i;a++)n.call(o,e[a],a,e);else for(var s in e)t.call(e,s)&&n.call(o,e[s],s,e)}},37795:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!==typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),l=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},u=Math.max(0,i.length-s.length),c=[],p=0;p<u;p++)c.push("$"+p);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),i.prototype){var f=function(){};f.prototype=i.prototype,a.prototype=new f,f.prototype=null}return a}},4090:function(e,t,r){"use strict";var n=r(37795);e.exports=Function.prototype.bind||n},67286:function(e,t,r){"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(k){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(t){return u}}}():u,p=r(32636)(),f=Object.getPrototypeOf||function(e){return e.__proto__},h={},d="undefined"===typeof Uint8Array?n:f(Uint8Array),y={"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?f(f([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&p?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&p?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?f(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=f(o.prototype))}return y[t]=r,r},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=r(4090),b=r(23198),w=m.call(Function.call,Array.prototype.concat),E=m.call(Function.apply,Array.prototype.splice),S=m.call(Function.call,String.prototype.replace),O=m.call(Function.call,String.prototype.slice),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,A=function(e){var t=O(e,0,1),r=O(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return S(e,P,(function(e,t,r,o){n[n.length]=r?S(o,x,"$1"):t||e})),n},R=function(e,t){var r,n=e;if(b(v,n)&&(n="%"+(r=v[n])[0]+"%"),b(y,n)){var i=y[n];if(i===h&&(i=g(n)),"undefined"===typeof i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new a('"allowMissing" argument must be a boolean');var r=A(e),n=r.length>0?r[0]:"",i=R("%"+n+"%",t),s=i.name,u=i.value,c=!1,p=i.alias;p&&(n=p[0],E(r,w([0,1],p)));for(var f=1,h=!0;f<r.length;f+=1){var d=r[f],g=O(d,0,1),v=O(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new o("property names with quotes must have matching quotes");if("constructor"!==d&&h||(c=!0),b(y,s="%"+(n+="."+d)+"%"))u=y[s];else if(null!=u){if(!(d in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&f+1>=r.length){var m=l(u,d);u=(h=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[d]}else h=b(u,d),u=u[d];h&&!c&&(y[s]=u)}}return u}},32636:function(e,t,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,o=r(66679);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&o())))}},66679:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},67226:function(e,t,r){"use strict";var n=r(66679);e.exports=function(){return n()&&!!Symbol.toStringTag}},23198:function(e,t,r){"use strict";var n=r(4090);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},62333:function(e,t){t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+e[t+p],p+=f,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+e[t+p],p+=f,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=u}return(h?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,p=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?f/l:f*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[r+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+h]=255&a,h+=d,a/=256,u-=8);e[r+h-d]|=128*y}},91285:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},52635:function(e,t,r){"use strict";var n=r(67226)(),o=r(62680)("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},a=function(e){return!!i(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a},43138:function(e,t,r){"use strict";var n,o=Object.prototype.toString,i=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=r(67226)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(a.test(i.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===o.call(e);if(!l)return!1;if("undefined"===typeof n){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},50198:function(e,t,r){"use strict";var n=r(46388),o=r(62191),i=r(62680),a=i("Object.prototype.toString"),s=r(67226)(),l="undefined"===typeof globalThis?r.g:globalThis,u=o(),c=i("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},p=i("String.prototype.slice"),f={},h=r(29765),d=Object.getPrototypeOf;s&&h&&d&&n(u,(function(e){var t=new l[e];if(Symbol.toStringTag in t){var r=d(t),n=h(r,Symbol.toStringTag);if(!n){var o=d(r);n=h(o,Symbol.toStringTag)}f[e]=n.get}}));e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=p(a(e),8,-1);return c(u,t)>-1}return!!h&&function(e){var t=!1;return n(f,(function(r,n){if(!t)try{t=r.call(e)===n}catch(o){}})),t}(e)}},77906:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},25977:function(e,t,r){var n=function(e,t){this.nested=t,e instanceof Error?t=e:"undefined"!==typeof e&&Object.defineProperty(this,"message",{value:e,writable:!0,enumerable:!1,configurable:!0}),Error.captureStackTrace(this,this.constructor);var r=function(e,t){return e.get?{get:function(){return o(e.get.call(this),this.nested)}}:{value:o(e.value,t)}}(Object.getOwnPropertyDescriptor(this,"stack"),t);Object.defineProperty(this,"stack",r)};function o(e,t){return t&&(e+="\nCaused By: "+t.stack),e}(0,r(43335).inherits)(n,Error),n.prototype.name="NestedError",e.exports=n},22876:function(e){"use strict";e.exports=()=>{const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}},78094:function(e,t,r){var n=r(48834).Buffer;"undefined"!=typeof self&&self,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function o(e){if(!(this instanceof o))return new o(e);this._=e}var i=o.prototype;function a(e,t){for(var r=0;r<e;r++)t(r)}function s(e,t,r){return function(e,t){a(t.length,(function(r){e(t[r],r,t)}))}((function(r,n,o){t=e(t,r,n,o)}),r),t}function l(e,t){return s((function(t,r,n,o){return t.concat([e(r,n,o)])}),[],t)}function u(e,t){var r={v:0,buf:t};return a(e,(function(){var e;r={v:r.v<<1|(e=r.buf,e[0]>>7),buf:function(e){var t=s((function(e,t,r,o){return e.concat(r===o.length-1?n.from([t,0]).readUInt16BE(0):o.readUInt16BE(r))}),[],e);return n.from(l((function(e){return(e<<1&65535)>>8}),t))}(r.buf)}})),r}function c(){return"undefined"!=typeof n}function p(){if(!c())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function f(e){p();var t=s((function(e,t){return e+t}),0,e);if(t%8!=0)throw new Error("The bits ["+e.join(", ")+"] add up to "+t+" which is not an even number of bytes; the total should be divisible by 8");var r,n=t/8,i=(r=function(e){return e>48},s((function(e,t){return e||(r(t)?t:e)}),null,e));if(i)throw new Error(i+" bit range requested exceeds 48 bit (6 byte) Number max.");return new o((function(t,r){var o=n+r;return o>t.length?O(r,n.toString()+" bytes"):S(o,s((function(e,t){var r=u(t,e.buf);return{coll:e.coll.concat(r.v),buf:r.buf}}),{coll:[],buf:t.slice(r,o)},e).coll)}))}function h(e,t){return new o((function(r,n){return p(),n+t>r.length?O(n,t+" bytes for "+e):S(n+t,r.slice(n,n+t))}))}function d(e,t){if("number"!=typeof(r=t)||Math.floor(r)!==r||t<0||t>6)throw new Error(e+" requires integer length in range [0, 6].");var r}function y(e){return d("uintBE",e),h("uintBE("+e+")",e).map((function(t){return t.readUIntBE(0,e)}))}function g(e){return d("uintLE",e),h("uintLE("+e+")",e).map((function(t){return t.readUIntLE(0,e)}))}function v(e){return d("intBE",e),h("intBE("+e+")",e).map((function(t){return t.readIntBE(0,e)}))}function m(e){return d("intLE",e),h("intLE("+e+")",e).map((function(t){return t.readIntLE(0,e)}))}function b(e){return e instanceof o}function w(e){return"[object Array]"==={}.toString.call(e)}function E(e){return c()&&n.isBuffer(e)}function S(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function O(e,t){return w(t)||(t=[t]),{status:!1,index:-1,value:null,furthest:e,expected:t}}function P(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var r=e.furthest===t.furthest?function(e,t){if(function(){if(void 0!==o._supportsSet)return o._supportsSet;var e="undefined"!=typeof Set;return o._supportsSet=e,e}()&&Array.from){for(var r=new Set(e),n=0;n<t.length;n++)r.add(t[n]);var i=Array.from(r);return i.sort(),i}for(var a={},s=0;s<e.length;s++)a[e[s]]=!0;for(var l=0;l<t.length;l++)a[t[l]]=!0;var u=[];for(var c in a)({}).hasOwnProperty.call(a,c)&&u.push(c);return u.sort(),u}(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:r}}var x={};function A(e,t){if(E(e))return{offset:t,line:-1,column:-1};e in x||(x[e]={});for(var r=x[e],n=0,o=0,i=0,a=t;a>=0;){if(a in r){n=r[a].line,0===i&&(i=r[a].lineStart);break}("\n"===e.charAt(a)||"\r"===e.charAt(a)&&"\n"!==e.charAt(a+1))&&(o++,0===i&&(i=a+1)),a--}var s=n+o,l=t-i;return r[t]={line:s,lineStart:i},{offset:t,line:s+1,column:l+1}}function R(e){if(!b(e))throw new Error("not a parser: "+e)}function k(e,t){return"string"==typeof e?e.charAt(t):e[t]}function j(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function _(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function C(e){if("string"!=typeof e)throw new Error("not a string: "+e)}var T=2,U=3,B=8,I=5*B,N=4*B,D="  ";function L(e,t){return new Array(t+1).join(e)}function M(e,t,r){var n=t-e.length;return n<=0?e:L(r,n)+e}function V(e,t,r,n){return{from:e-t>0?e-t:0,to:e+r>n?n:e+r}}function F(e,t){var r,n,o,i,a,u=t.index,c=u.offset,p=1;if(c===e.length)return"Got the end of the input";if(E(e)){var f=c-c%B,h=c-f,d=V(f,I,N+B,e.length),y=l((function(e){return l((function(e){return M(e.toString(16),2,"0")}),e)}),function(e,t){var r=e.length,n=[],o=0;if(r<=t)return[e.slice()];for(var i=0;i<r;i++)n[o]||n.push([]),n[o].push(e[i]),(i+1)%t==0&&o++;return n}(e.slice(d.from,d.to).toJSON().data,B));i=function(e){return 0===e.from&&1===e.to?{from:e.from,to:e.to}:{from:e.from/B,to:Math.floor(e.to/B)}}(d),n=f/B,r=3*h,h>=4&&(r+=1),p=2,o=l((function(e){return e.length<=4?e.join(" "):e.slice(0,4).join(" ")+"  "+e.slice(4).join(" ")}),y),(a=(8*(i.to>0?i.to-1:i.to)).toString(16).length)<2&&(a=2)}else{var g=e.split(/\r\n|[\n\r\u2028\u2029]/);r=u.column-1,n=u.line-1,i=V(n,T,U,g.length),o=g.slice(i.from,i.to),a=i.to.toString().length}var v=n-i.from;return E(e)&&(a=(8*(i.to>0?i.to-1:i.to)).toString(16).length)<2&&(a=2),s((function(t,n,o){var s,l=o===v,u=l?"> ":D;return s=E(e)?M((8*(i.from+o)).toString(16),a,"0"):M((i.from+o+1).toString(),a," "),[].concat(t,[u+s+" | "+n],l?[D+L(" ",a)+" | "+M("",r," ")+L("^",p)]:[])}),[],o).join("\n")}function $(e,t){return["\n","-- PARSING FAILED "+L("-",50),"\n\n",F(e,t),"\n\n",(r=t.expected,1===r.length?"Expected:\n\n"+r[0]:"Expected one of the following: \n\n"+r.join(", ")),"\n"].join("");var r}function z(e){return void 0!==e.flags?e.flags:[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.unicode?"u":"",e.sticky?"y":""].join("")}function W(){for(var e=[].slice.call(arguments),t=e.length,r=0;r<t;r+=1)R(e[r]);return o((function(r,n){for(var o,i=new Array(t),a=0;a<t;a+=1){if(!(o=P(e[a]._(r,n),o)).status)return o;i[a]=o.value,n=o.index}return P(S(n,i),o)}))}function H(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return _(t),W.apply(null,e).map((function(e){return t.apply(null,e)}))}function q(){var e=[].slice.call(arguments),t=e.length;if(0===t)return Q("zero alternates");for(var r=0;r<t;r+=1)R(e[r]);return o((function(t,r){for(var n,o=0;o<e.length;o+=1)if((n=P(e[o]._(t,r),n)).status)return n;return n}))}function Y(e,t){return G(e,t).or(Z([]))}function G(e,t){return R(e),R(t),H(e,t.then(e).many(),(function(e,t){return[e].concat(t)}))}function K(e){C(e);var t="'"+e+"'";return o((function(r,n){var o=n+e.length,i=r.slice(n,o);return i===e?S(o,i):O(n,t)}))}function J(e,t){!function(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=z(e),r=0;r<t.length;r++){var n=t.charAt(r);if("i"!==n&&"m"!==n&&"u"!==n&&"s"!==n)throw new Error('unsupported regexp flag "'+n+'": '+e)}}(e),arguments.length>=2?j(t):t=0;var r=function(e){return RegExp("^(?:"+e.source+")",z(e))}(e),n=""+e;return o((function(e,o){var i=r.exec(e.slice(o));if(i){if(0<=t&&t<=i.length){var a=i[0],s=i[t];return S(o+a.length,s)}return O(o,"valid match group (0 to "+i.length+") in "+n)}return O(o,n)}))}function Z(e){return o((function(t,r){return S(r,e)}))}function Q(e){return o((function(t,r){return O(r,e)}))}function X(e){if(b(e))return o((function(t,r){var n=e._(t,r);return n.index=r,n.value="",n}));if("string"==typeof e)return X(K(e));if(e instanceof RegExp)return X(J(e));throw new Error("not a string, regexp, or parser: "+e)}function ee(e){return R(e),o((function(t,r){var n=e._(t,r),o=t.slice(r,n.index);return n.status?O(r,'not "'+o+'"'):S(r,null)}))}function te(e){return _(e),o((function(t,r){var n=k(t,r);return r<t.length&&e(n)?S(r+1,n):O(r,"a character/byte matching "+e)}))}function re(e,t){arguments.length<2&&(t=e,e=void 0);var r=o((function(e,n){return r._=t()._,r._(e,n)}));return e?r.desc(e):r}function ne(){return Q("fantasy-land/empty")}i.parse=function(e){if("string"!=typeof e&&!E(e))throw new Error(".parse must be called with a string or Buffer as its argument");var t,r=this.skip(se)._(e,0);return t=r.status?{status:!0,value:r.value}:{status:!1,index:A(e,r.furthest),expected:r.expected},delete x[e],t},i.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var r=$(e,t),n=new Error(r);throw n.type="ParsimmonError",n.result=t,n},i.assert=function(e,t){return this.chain((function(r){return e(r)?Z(r):Q(t)}))},i.or=function(e){return q(this,e)},i.trim=function(e){return this.wrap(e,e)},i.wrap=function(e,t){return H(e,this,t,(function(e,t){return t}))},i.thru=function(e){return e(this)},i.then=function(e){return R(e),W(this,e).map((function(e){return e[1]}))},i.many=function(){var e=this;return o((function(t,r){for(var n=[],o=void 0;;){if(!(o=P(e._(t,r),o)).status)return P(S(r,n),o);if(r===o.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");r=o.index,n.push(o.value)}}))},i.tieWith=function(e){return C(e),this.map((function(t){if(function(e){if(!w(e))throw new Error("not an array: "+e)}(t),t.length){C(t[0]);for(var r=t[0],n=1;n<t.length;n++)C(t[n]),r+=e+t[n];return r}return""}))},i.tie=function(){return this.tieWith("")},i.times=function(e,t){var r=this;return arguments.length<2&&(t=e),j(e),j(t),o((function(n,o){for(var i=[],a=void 0,s=void 0,l=0;l<e;l+=1){if(s=P(a=r._(n,o),s),!a.status)return s;o=a.index,i.push(a.value)}for(;l<t&&(s=P(a=r._(n,o),s),a.status);l+=1)o=a.index,i.push(a.value);return P(S(o,i),s)}))},i.result=function(e){return this.map((function(){return e}))},i.atMost=function(e){return this.times(0,e)},i.atLeast=function(e){return H(this.times(e),this.many(),(function(e,t){return e.concat(t)}))},i.map=function(e){_(e);var t=this;return o((function(r,n){var o=t._(r,n);return o.status?P(S(o.index,e(o.value)),o):o}))},i.contramap=function(e){_(e);var t=this;return o((function(r,n){var o=t.parse(e(r.slice(n)));return o.status?S(n+r.length,o.value):o}))},i.promap=function(e,t){return _(e),_(t),this.contramap(e).map(t)},i.skip=function(e){return W(this,e).map((function(e){return e[0]}))},i.mark=function(){return H(oe,this,oe,(function(e,t,r){return{start:e,value:t,end:r}}))},i.node=function(e){return H(oe,this,oe,(function(t,r,n){return{name:e,value:r,start:t,end:n}}))},i.sepBy=function(e){return Y(this,e)},i.sepBy1=function(e){return G(this,e)},i.lookahead=function(e){return this.skip(X(e))},i.notFollowedBy=function(e){return this.skip(ee(e))},i.desc=function(e){w(e)||(e=[e]);var t=this;return o((function(r,n){var o=t._(r,n);return o.status||(o.expected=e),o}))},i.fallback=function(e){return this.or(Z(e))},i.ap=function(e){return H(e,this,(function(e,t){return e(t)}))},i.chain=function(e){var t=this;return o((function(r,n){var o=t._(r,n);return o.status?P(e(o.value)._(r,o.index),o):o}))},i.concat=i.or,i.empty=ne,i.of=Z,i["fantasy-land/ap"]=i.ap,i["fantasy-land/chain"]=i.chain,i["fantasy-land/concat"]=i.concat,i["fantasy-land/empty"]=i.empty,i["fantasy-land/of"]=i.of,i["fantasy-land/map"]=i.map;var oe=o((function(e,t){return S(t,A(e,t))})),ie=o((function(e,t){return t>=e.length?O(t,"any character/byte"):S(t+1,k(e,t))})),ae=o((function(e,t){return S(e.length,e.slice(t))})),se=o((function(e,t){return t<e.length?O(t,"EOF"):S(t,null)})),le=J(/[0-9]/).desc("a digit"),ue=J(/[0-9]*/).desc("optional digits"),ce=J(/[a-z]/i).desc("a letter"),pe=J(/[a-z]*/i).desc("optional letters"),fe=J(/\s*/).desc("optional whitespace"),he=J(/\s+/).desc("whitespace"),de=K("\r"),ye=K("\n"),ge=K("\r\n"),ve=q(ge,ye,de).desc("newline"),me=q(ve,se);o.all=ae,o.alt=q,o.any=ie,o.cr=de,o.createLanguage=function(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&function(r){t[r]=re((function(){return e[r](t)}))}(r);return t},o.crlf=ge,o.custom=function(e){return o(e(S,O))},o.digit=le,o.digits=ue,o.empty=ne,o.end=me,o.eof=se,o.fail=Q,o.formatError=$,o.index=oe,o.isParser=b,o.lazy=re,o.letter=ce,o.letters=pe,o.lf=ye,o.lookahead=X,o.makeFailure=O,o.makeSuccess=S,o.newline=ve,o.noneOf=function(e){return te((function(t){return e.indexOf(t)<0})).desc("none of '"+e+"'")},o.notFollowedBy=ee,o.of=Z,o.oneOf=function(e){for(var t=e.split(""),r=0;r<t.length;r++)t[r]="'"+t[r]+"'";return te((function(t){return e.indexOf(t)>=0})).desc(t)},o.optWhitespace=fe,o.Parser=o,o.range=function(e,t){return te((function(r){return e<=r&&r<=t})).desc(e+"-"+t)},o.regex=J,o.regexp=J,o.sepBy=Y,o.sepBy1=G,o.seq=W,o.seqMap=H,o.seqObj=function(){for(var e,t={},r=0,n=(e=arguments,Array.prototype.slice.call(e)),i=n.length,a=0;a<i;a+=1){var s=n[a];if(!b(s)){if(w(s)&&2===s.length&&"string"==typeof s[0]&&b(s[1])){var l=s[0];if(Object.prototype.hasOwnProperty.call(t,l))throw new Error("seqObj: duplicate key "+l);t[l]=!0,r++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===r)throw new Error("seqObj expects at least one named parser, found zero");return o((function(e,t){for(var r,o={},a=0;a<i;a+=1){var s,l;if(w(n[a])?(s=n[a][0],l=n[a][1]):(s=null,l=n[a]),!(r=P(l._(e,t),r)).status)return r;s&&(o[s]=r.value),t=r.index}return P(S(t,o),r)}))},o.string=K,o.succeed=Z,o.takeWhile=function(e){return _(e),o((function(t,r){for(var n=r;n<t.length&&e(k(t,n));)n++;return S(n,t.slice(r,n))}))},o.test=te,o.whitespace=he,o["fantasy-land/empty"]=ne,o["fantasy-land/of"]=Z,o.Binary={bitSeq:f,bitSeqObj:function(e){p();var t={},r=0,n=l((function(e){if(w(e)){var n=e;if(2!==n.length)throw new Error("["+n.join(", ")+"] should be length 2, got length "+n.length);if(C(n[0]),j(n[1]),Object.prototype.hasOwnProperty.call(t,n[0]))throw new Error("duplicate key in bitSeqObj: "+n[0]);return t[n[0]]=!0,r++,n}return j(e),[null,e]}),e);if(r<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var o=l((function(e){return e[0]}),n);return f(l((function(e){return e[1]}),n)).map((function(e){return s((function(e,t){return null!==t[0]&&(e[t[0]]=t[1]),e}),{},l((function(t,r){return[t,e[r]]}),o))}))},byte:function(e){if(p(),j(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var t=(e>15?"0x":"0x0")+e.toString(16);return o((function(r,n){var o=k(r,n);return o===e?S(n+1,o):O(n,t)}))},buffer:function(e){return h("buffer",e).map((function(e){return n.from(e)}))},encodedString:function(e,t){return h("string",t).map((function(t){return t.toString(e)}))},uintBE:y,uint8BE:y(1),uint16BE:y(2),uint32BE:y(4),uintLE:g,uint8LE:g(1),uint16LE:g(2),uint32LE:g(4),intBE:v,int8BE:v(1),int16BE:v(2),int32BE:v(4),intLE:m,int8LE:m(1),int16LE:m(2),int32LE:m(4),floatBE:h("floatBE",4).map((function(e){return e.readFloatBE(0)})),floatLE:h("floatLE",4).map((function(e){return e.readFloatLE(0)})),doubleBE:h("doubleBE",8).map((function(e){return e.readDoubleBE(0)})),doubleLE:h("doubleLE",8).map((function(e){return e.readDoubleLE(0)}))},e.exports=o}])},65089:function(e,t,r){let n;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},80589:function(e,t,r){!function(e,t){"use strict";function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n=r(t);function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}var a=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,r){return!Object.is(e,t[r])}))},s={error:null},l=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state=s,t.resetErrorBoundary=function(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];null==t.props.onReset||(e=t.props).onReset.apply(e,n),t.reset()},t}i(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var r=t.prototype;return r.reset=function(){this.setState(s)},r.componentDidCatch=function(e,t){var r,n;null==(r=(n=this.props).onError)||r.call(n,e,t)},r.componentDidUpdate=function(e,t){var r,n,o=this.state.error,i=this.props.resetKeys;null!==o&&null!==t.error&&a(e.resetKeys,i)&&(null==(r=(n=this.props).onResetKeysChange)||r.call(n,e.resetKeys,i),this.reset())},r.render=function(){var e=this.state.error,t=this.props,r=t.fallbackRender,o=t.FallbackComponent,i=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(n.isValidElement(i))return i;if("function"===typeof r)return r(a);if(o)return n.createElement(o,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(n.Component);function u(e,t){var r=function(r){return n.createElement(l,t,n.createElement(e,r))},o=e.displayName||e.name||"Unknown";return r.displayName="withErrorBoundary("+o+")",r}function c(e){var t=n.useState(null),r=t[0],o=t[1];if(null!=e)throw e;if(null!=r)throw r;return o}e.ErrorBoundary=l,e.useErrorHandler=c,e.withErrorBoundary=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(2784))},22027:function(e,t,r){var n,o=function(){var e=function(e){var t=e.constructor;return t.prototype=e,t}({constructor:function(e,r){this.array=[],this.compare=r||t;for(var n=e.length,o=0;o<n;)this.insert(e[o++])},insert:function(e){for(var t,r,n=this.array,o=this.compare,i=n.length-1,a=0,s=-1;i>=a;)if((r=o(n[t=(i+a)/2>>>0],e))<0)a=t+1;else{if(!(r>0)){s=t;break}i=t-1}for(-1===s&&(s=i),s++,i=n.length-1;s<i&&0===o(e,n[s]);)s++;for(t=n.length,n.push(e);t>s;)n[t]=n[--t];return n[s]=e,this},search:function(e){for(var t,r,n=this.array,o=this.compare,i=n.length-1,a=0;i>=a;)if((r=o(n[t=(i+a)/2>>>0],e))<0)a=t+1;else{if(!(r>0))return t;i=t-1}return-1},remove:function(e){var t=this.search(e);return t>=0&&this.array.splice(t,1),this}});return e.comparing=function(r,n){return new e(n,(function(e,n){return t(e[r],n[r])}))},e;function t(e,t){return e<t?-1:e>t?1:0}}();e.exports=o,void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},10643:function(e,t){"use strict";t.q5=l,t.D3=h,t.t8=g,t.tP=v,t.CE=P;const r="INVALID_ARGS";function n(e){throw new Error(e)}function o(e){const t=Object.keys(e);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t}const i={}.hasOwnProperty;function a(e){if(Array.isArray(e))return e.slice();const t=e,r=o(t),n={};for(let o=0;o<r.length;o++){const e=r[o];n[e]=t[e]}return n}function s(e){return null!=e&&"object"===typeof e}function l(e,t){return Array.isArray(t)?e.concat(t):e.concat([t])}function u(e,t){return Array.isArray(t)?t.concat(e):[t].concat(e)}function c(e){return e.length?e.slice(0,e.length-1):e}function p(e){return e.length?e.slice(1):e}function f(e,t,r){return e.slice(0,t).concat(Array.isArray(r)?r:[r]).concat(e.slice(t))}function h(e,t){return t>=e.length||t<0?e:e.slice(0,t).concat(e.slice(t+1))}function d(e,t,r){if(e[t]===r)return e;const n=e.length,o=Array(n);for(let i=0;i<n;i++)o[i]=e[i];return o[t]=r,o}function y(e,t){if(Array.isArray(t)||n(r),null==e)return;let o=e;for(let r=0;r<t.length;r++){const e=t[r];if(o=null!=o?o[e]:void 0,void 0===o)return o}return o}function g(e,t,r){let n=e;if(null==n&&(n="number"===typeof t?[]:{}),n[t]===r)return n;const o=a(n);return o[t]=r,o}function v(e,t,r){return t.length?m(e,t,r,0):r}function m(e,t,r,n){let o;const i=t[n];if(n===t.length-1)o=r;else{o=m(s(e)&&s(e[i])?e[i]:"number"===typeof t[n+1]?[]:{},t,r,n+1)}return g(e,i,o)}function b(e,t,r){return g(e,t,r(null==e?void 0:e[t]))}function w(e,t,r){return v(e,t,r(y(e,t)))}function E(e,t,r,n,o,i,...a){return a.length?A.call(null,!1,!1,e,t,r,n,o,i,...a):A(!1,!1,e,t,r,n,o,i)}function S(e,t,r,n,o,i,...a){return a.length?A.call(null,!1,!0,e,t,r,n,o,i,...a):A(!1,!0,e,t,r,n,o,i)}function O(e,t,r,n,o,i,a,...s){let l,u=y(e,t);return null==u&&(u={}),l=s.length?A.call(null,!1,!1,u,r,n,o,i,a,...s):A(!1,!1,u,r,n,o,i,a),v(e,t,l)}function P(e,t){const r=Array.isArray(t)?t:[t];let n=!1;for(let o=0;o<r.length;o++)if(i.call(e,r[o])){n=!0;break}if(!n)return e;const a={},s=o(e);for(let o=0;o<s.length;o++){const t=s[o];r.indexOf(t)>=0||(a[t]=e[t])}return a}function x(e,t,r,n,o,i,...a){return a.length?A.call(null,!0,!1,e,t,r,n,o,i,...a):A(!0,!1,e,t,r,n,o,i)}function A(e,t,i,...l){let u=i;null==u&&n(r);let c=!1;for(let r=0;r<l.length;r++){const n=l[r];if(null==n)continue;const i=o(n);if(i.length)for(let r=0;r<=i.length;r++){const o=i[r];if(e&&void 0!==u[o])continue;let l=n[o];t&&s(u[o])&&s(l)&&(l=A(e,t,u[o],l)),void 0!==l&&l!==u[o]&&(c||(c=!0,u=a(u)),u[o]=l)}}return u}},10082:function(e){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},54895:function(e,t,r){"use strict";var n=r(52635),o=r(43138),i=r(32094),a=r(50198);function s(e){return e.call.bind(e)}var l="undefined"!==typeof BigInt,u="undefined"!==typeof Symbol,c=s(Object.prototype.toString),p=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(l)var d=s(BigInt.prototype.valueOf);if(u)var y=s(Symbol.prototype.valueOf);function g(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function v(e){return"[object Map]"===c(e)}function m(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function w(e){return"[object WeakSet]"===c(e)}function E(e){return"[object ArrayBuffer]"===c(e)}function S(e){return"undefined"!==typeof ArrayBuffer&&(E.working?E(e):e instanceof ArrayBuffer)}function O(e){return"[object DataView]"===c(e)}function P(e){return"undefined"!==typeof DataView&&(O.working?O(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||P(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},v.working="undefined"!==typeof Map&&v(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(v.working?v(e):e instanceof Map)},m.working="undefined"!==typeof Set&&m(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(m.working?m(e):e instanceof Set)},b.working="undefined"!==typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!==typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},E.working="undefined"!==typeof ArrayBuffer&&E(new ArrayBuffer),t.isArrayBuffer=S,O.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&O(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=P;var x="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function A(e){return"[object SharedArrayBuffer]"===c(e)}function R(e){return"undefined"!==typeof x&&("undefined"===typeof A.working&&(A.working=A(new x)),A.working?A(e):e instanceof x)}function k(e){return g(e,p)}function j(e){return g(e,f)}function _(e){return g(e,h)}function C(e){return l&&g(e,d)}function T(e){return u&&g(e,y)}t.isSharedArrayBuffer=R,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=k,t.isStringObject=j,t.isBooleanObject=_,t.isBigIntObject=C,t.isSymbolObject=T,t.isBoxedPrimitive=function(e){return k(e)||j(e)||_(e)||C(e)||T(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(S(e)||R(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},43335:function(e,t,r){var n=r(34406),o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),s=n[r];r<o;s=n[++r])v(s)||!S(s)?a+=" "+s:a+=" "+u(s);return a},t.deprecate=function(e,r){if("undefined"!==typeof n&&!0===n.noDeprecation)return e;if("undefined"===typeof n)return function(){return t.deprecate(e,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return e.apply(this,arguments)}};var a={},s=/^$/;if(n.env.NODE_DEBUG){var l=n.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+l+"$","i")}function u(e,r){var n={seen:[],stylize:p};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),f(n,e,n.depth)}function c(e,t){var r=u.styles[t];return r?"\x1b["+u.colors[r][0]+"m"+e+"\x1b["+u.colors[r][1]+"m":e}function p(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&x(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return b(o)||(o=f(e,o,n)),o}var i=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,r);if(i)return i;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),P(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(r);if(0===a.length){if(x(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(E(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(O(r))return e.stylize(Date.prototype.toString.call(r),"date");if(P(r))return h(r)}var u,c="",p=!1,S=["{","}"];(y(r)&&(p=!0,S=["[","]"]),x(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return E(r)&&(c=" "+RegExp.prototype.toString.call(r)),O(r)&&(c=" "+Date.prototype.toUTCString.call(r)),P(r)&&(c=" "+h(r)),0!==a.length||p&&0!=r.length?n<0?E(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=p?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)_(t,String(a))?i.push(d(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))})),i}(e,r,n,s,a):a.map((function(t){return d(e,r,n,s,t,p)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,S)):S[0]+c+S[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),_(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(l.value)<0?(s=v(r)?f(e,l.value,null):f(e,l.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function y(e){return Array.isArray(e)}function g(e){return"boolean"===typeof e}function v(e){return null===e}function m(e){return"number"===typeof e}function b(e){return"string"===typeof e}function w(e){return void 0===e}function E(e){return S(e)&&"[object RegExp]"===A(e)}function S(e){return"object"===typeof e&&null!==e}function O(e){return S(e)&&"[object Date]"===A(e)}function P(e){return S(e)&&("[object Error]"===A(e)||e instanceof Error)}function x(e){return"function"===typeof e}function A(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!a[e])if(s.test(e)){var r=n.pid;a[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else a[e]=function(){};return a[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(54895),t.isArray=y,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=b,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=w,t.isRegExp=E,t.types.isRegExp=E,t.isObject=S,t.isDate=O,t.types.isDate=O,t.isError=P,t.types.isNativeError=P,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(10082);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",j(),t.format.apply(t,arguments))},t.inherits=r(91285),t._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var C="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t;if("function"!==typeof(t=e[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(a){r(a)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=C,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var o=t.pop();if("function"!==typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,t).then((function(e){n.nextTick(a.bind(null,null,e))}),(function(e){n.nextTick(T.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,o(e)),t}},32094:function(e,t,r){"use strict";var n=r(46388),o=r(62191),i=r(62680),a=i("Object.prototype.toString"),s=r(67226)(),l="undefined"===typeof globalThis?r.g:globalThis,u=o(),c=i("String.prototype.slice"),p={},f=r(29765),h=Object.getPrototypeOf;s&&f&&h&&n(u,(function(e){if("function"===typeof l[e]){var t=new l[e];if(Symbol.toStringTag in t){var r=h(t),n=f(r,Symbol.toStringTag);if(!n){var o=h(r);n=f(o,Symbol.toStringTag)}p[e]=n.get}}}));var d=r(50198);e.exports=function(e){return!!d(e)&&(s&&Symbol.toStringTag in e?function(e){var t=!1;return n(p,(function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(i){}})),t}(e):c(a(e),8,-1))}},62191:function(e,t,r){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"===typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"===typeof o[n[t]]&&(e[e.length]=n[t]);return e}},29765:function(e,t,r){"use strict";var n=r(67286)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(o){n=null}e.exports=n}}]);