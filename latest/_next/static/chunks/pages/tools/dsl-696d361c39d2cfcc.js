(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8451],{30876:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(2784);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"===typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"===typeof e||i){var o=n.length,s=new Array(o);s[0]=d;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"===typeof e?e:i,s[1]=r;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},52308:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/dsl",function(){return n(51956)}])},43857:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var a=n(52322),i=n(2784),o=n(97729),s=n(64033),r=n(30876),l=n(21925),c=n(76808),p=n(55165),u=n(63637),d=n.n(u);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}var g=["id"],f=["id"],x="chakra-skip-nav",b={userSelect:"none",border:"0",height:"1px",width:"1px",margin:"-1px",padding:"0",outline:"0",overflow:"hidden",position:"absolute",clip:"rect(0 0 0 0)",_focus:{clip:"auto",width:"auto",height:"auto"}},k=(0,c.Gp)((function(e,t){var n=(0,c.mq)("SkipLink",e),a=(0,c.Lr)(e),o=a.id,s=void 0===o?x:o,r=h(a,g),l=d()({},b,n);return i.createElement(c.m$.a,m({},r,{ref:t,href:"#"+s,__css:l}))}));p.Ts&&(k.displayName="SkipNavLink");var y=(0,c.Gp)((function(e,t){var n=e.id,a=void 0===n?x:n,o=h(e,f);return i.createElement(c.m$.div,m({ref:t,id:a,tabIndex:-1,style:{outline:0}},o))}));p.Ts&&(y.displayName="SkipNavContent");var v=n(46977),N=n(96882),j=function(e){var t;return(0,a.jsxs)(s.xu,{display:{base:"none",xl:"block"},children:["Table Of Contents",(0,a.jsx)(s.GS,{spacing:1,ml:"0",mt:"4",styleType:"none",children:null===(t=e.tableOfContents)||void 0===t?void 0:t.map((function(e){return(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#".concat(e.id),children:e.text})},e.text)}))})]})},w=function(e){var t=i.useContext(v.Il).bannerExpanded,n="72px",o="calc(100vh - 88px - ".concat(t?n:"0px",")"),r="calc(100vh - 88px - 105px - ".concat(t?n:"0px",")");return(0,a.jsxs)(s.xu,{minH:"100vh",children:[(0,a.jsx)(k,{children:"Skip to Main Content"}),(0,a.jsxs)(s.kC,{flexDir:"column",padding:"2",children:[(0,a.jsx)(N._g,{}),(0,a.jsx)(s.iz,{}),(0,a.jsx)(s.kC,{children:(0,a.jsx)(s.xu,{as:"main",w:"100%",mx:"auto",children:(0,a.jsxs)(s.xu,{display:{md:"flex"},children:[(0,a.jsx)(s.xu,{display:{base:"none",md:"block"},overflow:"auto",maxH:o,pr:"8",ml:"4",children:(0,a.jsx)(N.Hy,{})}),(0,a.jsxs)(s.xu,{flex:"1",minW:"0",overflow:"auto",maxH:o,children:[(0,a.jsxs)(s.xu,{minH:r,children:[(0,a.jsx)(y,{}),e.children]}),(0,a.jsx)(s.xu,{pt:"20",children:(0,a.jsx)(N.$_,{})})]}),e.tableOfContents&&(0,a.jsx)(j,{tableOfContents:e.tableOfContents})]})})})]})]})};function C(e){return function(t){return(0,a.jsxs)(w,{children:[(0,a.jsx)(o.default,{children:(0,a.jsxs)("title",{children:["Player - ",e.title]})}),(0,a.jsx)(s.kC,{alignItems:"center",children:(0,a.jsx)(s.W2,{maxW:"container.lg",children:(0,a.jsx)(r.Zo,{components:l.tl,children:t.children})})})]})}}},51956:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});n(2784);var a=n(30876),i=n(43857);function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s={},r=(0,i.Z)({title:"Writing content using TSX",tableOfContents:[{text:"TSX Content Authoring",id:"tsx-content-authoring",level:1},{text:"Writing TSX Content",id:"writing-tsx-content",level:2},{text:"Assets/Views",id:"assetsviews",level:2},{text:"Automatic ID generation",id:"automatic-id-generation",level:3},{text:"Automatic Text/Collection generation",id:"automatic-textcollection-generation",level:3},{text:"Bindings/Expressions",id:"bindingsexpressions",level:2},{text:"Templates",id:"templates",level:2},{text:"Switches",id:"switches",level:2},{text:"Schema",id:"schema",level:2},{text:"Navigation",id:"navigation",level:2},{text:"Creating TSX Components",id:"creating-tsx-components",level:1},{text:"Creating a basic component",id:"creating-a-basic-component",level:2},{text:"Slots",id:"slots",level:2}]});function l(e){var t=e.components,n=o(e,["components"]);return(0,a.kt)(r,Object.assign({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",Object.assign({},{id:"tsx-content-authoring"}),(0,a.kt)("a",Object.assign({parentName:"h1"},{href:"#tsx-content-authoring"}),"TSX Content Authoring")),(0,a.kt)("p",null,"While JSON content makes for a decent transport layer, it\u2019s not always the preferable authoring format. To take advantage of existing developer tool-chains, Player provides a mechanism for authoring content in (J/T)SX as React components. This is paired with a cli to transpile the React tree into a JSON content."),(0,a.kt)("h2",Object.assign({},{id:"writing-tsx-content"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#writing-tsx-content"}),"Writing TSX Content")),(0,a.kt)("p",null,"In order to use the TSX-variant to write content, your asset library should ship a TSX component package to leverage. Read more ",(0,a.kt)("a",Object.assign({parentName:"p"},{href:"#creating-tsx-components"}),"here")," for more details on creating one."),(0,a.kt)("p",null,"In the examples below, we will assume one already exists."),(0,a.kt)("h2",Object.assign({},{id:"assetsviews"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#assetsviews"}),"Assets/Views")),(0,a.kt)("p",null,"Assets and views are treated as basic React elements:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import { Input, Text, Collection } from '@player-ui/reference-assets-components';\n\nconst view = (\n  <Collection>\n    <Text>Some value</Text>\n    <Input>\n      <Input.Label>Some label</Input.Label>\n    </Input>\n  </Collection>\n);\n")),(0,a.kt)("p",null,"which would generate something equivalent to: "),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-json"}),'{\n  "id": "root",\n  "type": "collection",\n  "values": [\n    {\n      "asset": {\n        "id": "root-values-1",\n        "type": "text",\n        "value": "Some value"\n      }\n    },\n    {\n      "asset": {\n        "id": "root-values-2",\n        "type": "input",\n        "label": {\n          "asset": {\n            "id": "root-values-2-label",\n            "type": "text",\n            "value": "Some label"\n          }\n        }\n      }\n    }\n  ]\n}\n')),(0,a.kt)("h3",Object.assign({},{id:"automatic-id-generation"}),(0,a.kt)("a",Object.assign({parentName:"h3"},{href:"#automatic-id-generation"}),"Automatic ID generation")),(0,a.kt)("p",null,"Any component leveraging the base ",(0,a.kt)("inlineCode",{parentName:"p"},"Asset")," component will automatically generate an ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," if one isn\u2019t provided."),(0,a.kt)("h3",Object.assign({},{id:"automatic-textcollection-generation"}),(0,a.kt)("a",Object.assign({parentName:"h3"},{href:"#automatic-textcollection-generation"}),"Automatic Text/Collection generation")),(0,a.kt)("p",null,"In thee event that an asset is expected, but a ",(0,a.kt)("inlineCode",{parentName:"p"},"string")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"number")," is found, a ",(0,a.kt)("inlineCode",{parentName:"p"},"Text")," node will automatically be created (provided the asset-library as a ",(0,a.kt)("em",{parentName:"p"},"text-asset-factory")," configured)."),(0,a.kt)("p",null,"Similarly, if a single asset is expected, but a list is found, a ",(0,a.kt)("inlineCode",{parentName:"p"},"Collection")," node will be created. "),(0,a.kt)("h2",Object.assign({},{id:"bindingsexpressions"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#bindingsexpressions"}),"Bindings/Expressions")),(0,a.kt)("p",null,"Both binding and expression in the TSX authoring leverages a tagged template, typically abbreviated as ",(0,a.kt)("inlineCode",{parentName:"p"},"b")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"e")," respectively. In a similar fashion to using ",(0,a.kt)("inlineCode",{parentName:"p"},"css")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"graphql")," in a TS/JS file, this enables syntax-highlighting and validation of bindings and expressions within a JS file."),(0,a.kt)("p",null,"To create a binding or expression:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import { binding as b, expression as e } from '@player-ui/dsl';\n\nconst myBinding = b`foo.bar`;\nconst myExpression = e`foo()`;\n")),(0,a.kt)("p",null,"Bindings and expressions can also be used within template strings and automatically dereference themselves:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"const stringWithBinding = `Some text: ${myBinding}`; // 'Some text: {{foo.bar}}'\nconst stringWithExp = `Some expr: ${myExpression}`; // 'Some expr: @[foo()]@'\n")),(0,a.kt)("h2",Object.assign({},{id:"templates"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#templates"}),"Templates")),(0,a.kt)("p",null,"Template support is included via the ",(0,a.kt)("inlineCode",{parentName:"p"},"@player-ui/dsl")," package. This can be used in place of an asset slot:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),'<Collection>\n  <Collection.Values>\n    <Template data={b`foo.bar`}>\n      <Text>Template Value</Text>\n    </Template>\n    <Text id="static">Value 1</Text>\n  </Collection.Values>\n</Collection>\n')),(0,a.kt)("p",null,"Templates can be nested within one another, and the auto-id generation will handle adding the ",(0,a.kt)("inlineCode",{parentName:"p"},"_index_")," information to any generated ",(0,a.kt)("inlineCode",{parentName:"p"},"id"),"."),(0,a.kt)("h2",Object.assign({},{id:"switches"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#switches"}),"Switches")),(0,a.kt)("p",null,"Included as well is the ability to specify switches:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"<Collection>\n  <Collection.Label>\n    <Switch isDynamic>\n      <Switch.Case exp={e`foo() = bar()`}>\n        <Text>Text 1</Text>\n      </Switch.Case>\n      <Switch.Case>\n        <Text>Text 1</Text>\n      </Switch.Case>\n    </Switch>\n  </Collection.Label>\n</Collection>\n")),(0,a.kt)("p",null,"Use the ",(0,a.kt)("inlineCode",{parentName:"p"},"isDynamic")," flag to denote if it should be a ",(0,a.kt)("inlineCode",{parentName:"p"},"static")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"dynamic")," switch."),(0,a.kt)("h2",Object.assign({},{id:"schema"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#schema"}),"Schema")),(0,a.kt)("p",null,"The detailed format for the schema section is described ",(0,a.kt)("a",Object.assign({parentName:"p"},{href:"../content/dsl###Schema"}),"here"),". The schema object is a mix of JS object structure with leaf nodes that are Player data types or type references. At DSL compile time, this data sctructure will be compiled down into the schema format required in JSON. While you can write the schema in the native format, using this noation allows it to be referenced directly in the TSX content in addition to being much more intuitive to write. "),(0,a.kt)("h2",Object.assign({},{id:"navigation"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#navigation"}),"Navigation")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"navigation")," content segment is a basic JS object. The ",(0,a.kt)("inlineCode",{parentName:"p"},"@player-ui/player")," package exports TypeScript interfaces which can provide typings for these:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import { Navigation } from '@player-ui/player';\n\nconst navigation: Navigation = {\n  BEGIN: 'Start',\n  Start: {\n    startState: 'VIEW_1',\n    VIEW_1: {\n      state_type: 'VIEW',\n      ref: 'view-1',\n      transitions: {\n        '*': 'END_Done',\n      },\n    },\n    END_Done: {\n      state_type: 'END',  \n      outcome: 'done',\n    },\n  },\n};\n")),(0,a.kt)("h1",Object.assign({},{id:"creating-tsx-components"}),(0,a.kt)("a",Object.assign({parentName:"h1"},{href:"#creating-tsx-components"}),"Creating TSX Components")),(0,a.kt)("p",null,"In order to take advantage of the auto-completion and validation of TypeScript types, asset libraries can export a component library for content authoring. Creating components isn\u2019t much different than writing a React component for the web. The primative elements uses the ",(0,a.kt)("a",Object.assign({parentName:"p"},{href:"https://github.com/intuit/react-json-reconciler"}),"react-json-reconciler")," to create the JSON content tree, with utilities to make it quick and painless to create new asset-components."),(0,a.kt)("h2",Object.assign({},{id:"creating-a-basic-component"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#creating-a-basic-component"}),"Creating a basic component")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Asset")," component from the ",(0,a.kt)("inlineCode",{parentName:"p"},"@player-ui/dsl")," package is the quickest way to create a new component."),(0,a.kt)("p",null,"In the examples below, we\u2019ll be creating a TSX component for the ",(0,a.kt)("inlineCode",{parentName:"p"},"action")," asset in our reference set. "),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"action")," asset has a ",(0,a.kt)("inlineCode",{parentName:"p"},"label")," slot (which is typically used as a ",(0,a.kt)("inlineCode",{parentName:"p"},"text")," asset), a ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," (for flow transitions), and an ",(0,a.kt)("inlineCode",{parentName:"p"},"exp")," for evaluating expressions.\nIt\u2019s type resembles something akin to:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"import { Asset, AssetWrapper, Expression } from '@player-ui/player';\n\nexport interface ActionAsset<AnyTextAsset extends Asset = Asset> extends Asset<'action'> {\n  /** The transition value of the action in the state machine */\n  value?: string;\n\n  /** A text-like asset for the action's label */\n  label?: AssetWrapper<AnyTextAsset>;\n\n  /** An optional expression to execute before transitioning */\n  exp?: Expression;\n}\n")),(0,a.kt)("p",null,"To turn this interface into a usable component, create a new React component that ",(0,a.kt)("em",{parentName:"p"},"renders")," an Asset:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import { Asset, AssetPropsWithChildren } from '@player-ui/dsl';\n\nexport const Action = (props: AssetPropsWithChildren<ActionAsset>) => {\n  return <Asset type=\"action\" {...props} />;\n}\n")),(0,a.kt)("p",null,"This would allow users to import the ",(0,a.kt)("inlineCode",{parentName:"p"},"Action")," component, and ",(0,a.kt)("em",{parentName:"p"},"render")," it to JSON:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),'const myView = <Action value="next" />\n')),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"AssetPropsWithChildren")," type is a utility type to help convert the ",(0,a.kt)("inlineCode",{parentName:"p"},"Asset")," type (which has a required ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"type")," properties) to a type more suited for components. It changes the ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," to be optional, and adds a ",(0,a.kt)("inlineCode",{parentName:"p"},"applicability")," property automatically."),(0,a.kt)("h2",Object.assign({},{id:"slots"}),(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#slots"}),"Slots")),(0,a.kt)("p",null,"Continuing the example fo the ",(0,a.kt)("inlineCode",{parentName:"p"},"ActionAsset"),", we need a way for users to users to specify the nested ",(0,a.kt)("inlineCode",{parentName:"p"},"label")," property, which itself is another asset. This can be accomplished using the ",(0,a.kt)("inlineCode",{parentName:"p"},"createSlot")," utility function."),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import { Asset, AssetPropsWithChildren } from '@player-ui/dsl';\n\nexport const Action = (props: AssetPropsWithChildren<ActionAsset>) => {\n  return <Asset type=\"action\" {...props} />;\n}\n\nAction.Label = createSlot({\n  name: 'label'\n})\n")),(0,a.kt)("p",null,"This adds component (",(0,a.kt)("inlineCode",{parentName:"p"},"Action.Label"),") that will automatically place any nested children under the ",(0,a.kt)("inlineCode",{parentName:"p"},"label")," property of the parent asset:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),'const myView = (\n  <Action value="next">\n    <Action.Label>\n      <Text value="Continue" />\n    </Action.Label>\n  </Action>\n);\n')),(0,a.kt)("p",null,"It also accepts components for automatically creating ",(0,a.kt)("inlineCode",{parentName:"p"},"text")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"collection")," assets, allowing users to shortcut the ",(0,a.kt)("inlineCode",{parentName:"p"},"Text")," component:"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),'const myView = (\n  <Action value="next">\n    <Action.Label>Continue</Action.Label>\n  </Action>\n);\n')))}l.isMDXComponent=!0}},function(e){e.O(0,[6525,204,3795,9774,2888,179],(function(){return t=52308,e(e.s=t);var t}));var t=e.O();_N_E=t}]);